###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.51A/W32 for 8051                24/May/2015  19:07:09 #
# Copyright 2004-2009 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Com #
#                          ponents\mt\MT_ZDO.c                                #
#    Command line       =  -f "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0 #
#                          \Projects\zstack\Samples\ParkingS\CC2530DB\..\..\. #
#                          .\Tools\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ        #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DRTR_NWK -DBLINK_LEDS) -f "C:\Texas             #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\Tools\CC253 #
#                          0DB\f8wConfig.cfg" (-DSECURE=0                     #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Co #
#                          mponents\mt\MT_ZDO.c" -D ZTOOL_P1 -D MT_TASK -D    #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -lC "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4. #
#                          0\Projects\zstack\Samples\ParkingS\CC2530DB\Router #
#                          EB\List\" -lA "C:\Texas Instruments\ZStack-CC2530- #
#                          2.3.0-1.4.0\Projects\zstack\Samples\ParkingS\CC253 #
#                          0DB\RouterEB\List\" --diag_suppress Pe001,Pa010    #
#                          -o "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0 #
#                          \Projects\zstack\Samples\ParkingS\CC2530DB\RouterE #
#                          B\Obj\" -e --require_prototypes --debug            #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "C:\Texas                  #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\" -I "C:\Texas       #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\SOURCE\" -I       #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pr #
#                          ojects\zstack\Samples\ParkingS\CC2530DB\..\..\..\Z #
#                          MAIN\TI2530DB\" -I "C:\Texas                       #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\MT\" -I "C:\Texas Instruments\ZStack-CC2530- #
#                          2.3.0-1.4.0\Projects\zstack\Samples\ParkingS\CC253 #
#                          0DB\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\" -I     #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pr #
#                          ojects\zstack\Samples\ParkingS\CC2530DB\..\..\..\. #
#                          .\..\COMPONENTS\HAL\TARGET\CC2530EB\" -I           #
#                          "C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pr #
#                          ojects\zstack\Samples\ParkingS\CC2530DB\..\..\..\. #
#                          .\..\COMPONENTS\OSAL\MCU\CCSOC\" -I "C:\Texas      #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\OSAL\INCLUDE\" -I "C:\Texas                  #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\AF\" -I "C:\Texas                      #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\NWK\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\SEC\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\SAPI\" -I "C:\Texas                    #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\SYS\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\ZDO\" -I "C:\Texas                     #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\ZMAC\F8W\" -I "C:\Texas                      #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\ZMAC\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\SERVICES\SADDR\" -I "C:\Texas                #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\SERVICES\SDATA\" -I "C:\Texas                #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\MAC\INCLUDE\" -I "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\MAC\HIGH_LEVEL\" -I "C:\Texas                #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\MAC\LOW_LEVEL\srf04\" -I "C:\Texas           #
#                          Instruments\ZStack-CC2530-2.3.0-1.4.0\Projects\zst #
#                          ack\Samples\ParkingS\CC2530DB\..\..\..\..\..\COMPO #
#                          NENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\" -I         #
#                          "C:\Program Files\IAR Systems\Embedded Workbench   #
#                          5.3\8051\INC\" -I "C:\Program Files\IAR            #
#                          Systems\Embedded Workbench 5.3\8051\INC\CLIB\"     #
#                          -Ohz                                               #
#    List file          =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pro #
#                          jects\zstack\Samples\ParkingS\CC2530DB\RouterEB\Li #
#                          st\MT_ZDO.lst                                      #
#    Object file        =  C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Pro #
#                          jects\zstack\Samples\ParkingS\CC2530DB\RouterEB\Ob #
#                          j\MT_ZDO.r51                                       #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-CC2530-2.3.0-1.4.0\Components\mt\MT_ZDO.c
      1          /**************************************************************************************************
      2            Filename:       MT_ZDO.c
      3            Revised:        $Date: 2009-12-29 11:40:43 -0800 (Tue, 29 Dec 2009) $
      4            Revision:       $Revision: 21414 $
      5          
      6            Description:    MonitorTest functions for the ZDO layer.
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          #ifdef MT_ZDO_FUNC
     41          
     42          /**************************************************************************************************
     43           * INCLUDES
     44           **************************************************************************************************/
     45          #include "ZComDef.h"
     46          #include "OSAL.h"
     47          #include "MT.h"
     48          #include "MT_ZDO.h"
     49          #include "APSMEDE.h"
     50          #include "ZDConfig.h"
     51          #include "ZDProfile.h"
     52          #include "ZDObject.h"
     53          #include "ZDApp.h"
     54          
     55          #if !defined( WIN32 )
     56            #include "OnBoard.h"
     57          #endif
     58          
     59          #if defined(ZDO_LINK_KEY_MANAGEMENT)
     60            #include "ZDSecMgr.h"
     61          #endif
     62          
     63          #include "nwk_util.h"
     64          
     65          /**************************************************************************************************
     66           * CONSTANTS
     67           **************************************************************************************************/
     68          #define MT_ZDO_END_DEVICE_ANNCE_IND_LEN   0x0D
     69          #define MT_ZDO_ADDR_RSP_LEN               0x0D
     70          #define MT_ZDO_BIND_UNBIND_RSP_LEN        0x03
     71          
     72          #define MTZDO_RESPONSE_BUFFER_LEN   100
     73          
     74          #define MTZDO_MAX_MATCH_CLUSTERS    16
     75          #define MTZDO_MAX_ED_BIND_CLUSTERS  15
     76          
     77          // Conversion from ZDO Cluster Id to the RPC AREQ Id is direct as follows:
     78          #define MT_ZDO_CID_TO_AREQ_ID(CId)  ((uint8)(CId) | 0x80)
     79          
     80          /**************************************************************************************************
     81           * GLOBAL VARIABLES
     82           **************************************************************************************************/

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     83          uint32 _zdoCallbackSub;
   \                     _zdoCallbackSub:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     84          
     85          /**************************************************************************************************
     86           * LOCAL VARIABLES
     87           **************************************************************************************************/
     88          
     89          /**************************************************************************************************
     90           * LOCAL FUNCTIONS
     91           **************************************************************************************************/
     92          #if defined (MT_ZDO_FUNC)
     93          void MT_ZdoNWKAddressRequest(uint8 *pBuf);
     94          void MT_ZdoIEEEAddrRequest(uint8 *pBuf);
     95          void MT_ZdoNodeDescRequest(uint8 *pBuf);
     96          void MT_ZdoPowerDescRequest(uint8 *pBuf);
     97          void MT_ZdoSimpleDescRequest(uint8 *pBuf);
     98          void MT_ZdoActiveEpRequest(uint8 *pBuf);
     99          void MT_ZdoMatchDescRequest(uint8 *pBuf);
    100          void MT_ZdoComplexDescRequest(uint8 *pBuf);
    101          void MT_ZdoUserDescRequest(uint8 *pBuf);
    102          void MT_ZdoEndDevAnnce(uint8 *pBuf);
    103          void MT_ZdoUserDescSet(uint8 *pBuf);
    104          void MT_ZdoServiceDiscRequest(uint8 *pBuf);
    105          void MT_ZdoEndDevBindRequest(uint8 *pBuf);
    106          void MT_ZdoBindRequest(uint8 *pBuf);
    107          void MT_ZdoUnbindRequest(uint8 *pBuf);
    108          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf);
    109          void MT_ZdoSetLinkKey(uint8 *pBuf);
    110          void MT_ZdoRemoveLinkKey(uint8 *pBuf);
    111          void MT_ZdoGetLinkKey(uint8 *pBuf);
    112          #if defined (MT_ZDO_MGMT)
    113          void MT_ZdoMgmtLqiRequest(uint8 *pBuf);
    114          void MT_ZdoMgmtRtgRequest(uint8 *pBuf);
    115          void MT_ZdoMgmtBindRequest(uint8 *pBuf);
    116          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf);
    117          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf);
    118          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf);
    119          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf);
    120          #endif /* MT_ZDO_MGMT */
    121          void MT_ZdoStartupFromApp(uint8 *pBuf);
    122          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf);
    123          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf);
    124          #endif /* MT_ZDO_FUNC */
    125          
    126          #if defined (MT_ZDO_CB_FUNC)
    127          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg );
    128          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID );
    129          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr );
    130          void MT_ZdoBindUnbindRspCB( uint16 clusterID, uint16 srcAddr, uint8 status );
    131          void* MT_ZdoSrcRtgCB( void *pStr );
    132          #endif /* MT_ZDO_CB_FUNC */
    133          
    134          #if defined (MT_ZDO_FUNC)
    135          /***************************************************************************************************
    136           * @fn      MT_ZdoInit
    137           *
    138           * @brief   MT ZDO initialization
    139           *
    140           * @param   none
    141           *
    142           * @return  none
    143           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    144          void MT_ZdoInit(void)
   \                     MT_ZdoInit:
    145          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    146          #ifdef MT_ZDO_CB_FUNC
    147            /* Register with ZDO for indication callbacks */
    148            ZDO_RegisterForZdoCB(ZDO_SRC_RTG_IND_CBID, &MT_ZdoSrcRtgCB);
    149          #endif
    150          }
   \   000000   02....       LJMP    ?BRET
    151          
    152          /***************************************************************************************************
    153           * @fn      MT_ZdoCommandProcessing
    154           *
    155           * @brief
    156           *
    157           *   Process all the ZDO commands that are issued by test tool
    158           *
    159           * @param   pBuf - pointer to the msg buffer
    160           *
    161           *          | LEN  | CMD0  | CMD1  |  DATA  |
    162           *          |  1   |   1   |   1   |  0-255 |
    163           *
    164           * @return  status
    165           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    166          uint8 MT_ZdoCommandProcessing(uint8* pBuf)
   \                     MT_ZdoCommandProcessing:
    167          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    168            uint8 status = MT_RPC_SUCCESS;
   \   000005   7E00         MOV     R6,#0x0
    169          
    170            switch (pBuf[MT_RPC_POS_CMD1])
   \   000007   8A82         MOV     DPL,R2
   \   000009   8B83         MOV     DPH,R3
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for MT_ZdoCommandProcessing>_0`:
   \   000011   00           DB        0
   \   000012   15           DB        21
   \   000013   00           DB        0
   \   000014   ....         DW        ??MT_ZdoCommandProcessing_0
   \   000016   01           DB        1
   \   000017   ....         DW        ??MT_ZdoCommandProcessing_1
   \   000019   02           DB        2
   \   00001A   ....         DW        ??MT_ZdoCommandProcessing_2
   \   00001C   03           DB        3
   \   00001D   ....         DW        ??MT_ZdoCommandProcessing_3
   \   00001F   04           DB        4
   \   000020   ....         DW        ??MT_ZdoCommandProcessing_4
   \   000022   05           DB        5
   \   000023   ....         DW        ??MT_ZdoCommandProcessing_5
   \   000025   06           DB        6
   \   000026   ....         DW        ??MT_ZdoCommandProcessing_6
   \   000028   07           DB        7
   \   000029   ....         DW        ??MT_ZdoCommandProcessing_7
   \   00002B   08           DB        8
   \   00002C   ....         DW        ??MT_ZdoCommandProcessing_8
   \   00002E   0A           DB        10
   \   00002F   ....         DW        ??MT_ZdoCommandProcessing_9
   \   000031   0B           DB        11
   \   000032   ....         DW        ??MT_ZdoCommandProcessing_10
   \   000034   0C           DB        12
   \   000035   ....         DW        ??MT_ZdoCommandProcessing_11
   \   000037   20           DB        32
   \   000038   ....         DW        ??MT_ZdoCommandProcessing_12
   \   00003A   21           DB        33
   \   00003B   ....         DW        ??MT_ZdoCommandProcessing_13
   \   00003D   22           DB        34
   \   00003E   ....         DW        ??MT_ZdoCommandProcessing_14
   \   000040   23           DB        35
   \   000041   ....         DW        ??MT_ZdoCommandProcessing_15
   \   000043   24           DB        36
   \   000044   ....         DW        ??MT_ZdoCommandProcessing_16
   \   000046   25           DB        37
   \   000047   ....         DW        ??MT_ZdoCommandProcessing_17
   \   000049   3E           DB        62
   \   00004A   ....         DW        ??MT_ZdoCommandProcessing_18
   \   00004C   3F           DB        63
   \   00004D   ....         DW        ??MT_ZdoCommandProcessing_19
   \   00004F   40           DB        64
   \   000050   ....         DW        ??MT_ZdoCommandProcessing_20
   \   000052   ....         DW        ??MT_ZdoCommandProcessing_21
    171            {
    172          #if defined ( ZDO_NWKADDR_REQUEST )
    173              case MT_ZDO_NWK_ADDR_REQ:
    174                MT_ZdoNWKAddressRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_0:
   \   000054                ; Setup parameters for call to function MT_ZdoNWKAddressRequest
   \   000054   12....       LCALL   ??MT_ZdoNWKAddressRequest?relay
   \   000057   8066         SJMP    ??MT_ZdoCommandProcessing_22
    175                break;
    176          #endif
    177          
    178          #if defined ( ZDO_IEEEADDR_REQUEST )
    179              case MT_ZDO_IEEE_ADDR_REQ:
    180                MT_ZdoIEEEAddrRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_1:
   \   000059                ; Setup parameters for call to function MT_ZdoIEEEAddrRequest
   \   000059   12....       LCALL   ??MT_ZdoIEEEAddrRequest?relay
   \   00005C   8061         SJMP    ??MT_ZdoCommandProcessing_22
    181                break;
    182          #endif
    183          
    184          #if defined ( ZDO_NODEDESC_REQUEST )
    185              case MT_ZDO_NODE_DESC_REQ:
    186                MT_ZdoNodeDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_2:
   \   00005E                ; Setup parameters for call to function MT_ZdoNodeDescRequest
   \   00005E   12....       LCALL   ??MT_ZdoNodeDescRequest?relay
   \   000061   805C         SJMP    ??MT_ZdoCommandProcessing_22
    187                break;
    188          #endif
    189          
    190          #if defined ( ZDO_POWERDESC_REQUEST )
    191              case MT_ZDO_POWER_DESC_REQ:
    192                MT_ZdoPowerDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_3:
   \   000063                ; Setup parameters for call to function MT_ZdoPowerDescRequest
   \   000063   12....       LCALL   ??MT_ZdoPowerDescRequest?relay
   \   000066   8057         SJMP    ??MT_ZdoCommandProcessing_22
    193                break;
    194          #endif
    195          
    196          #if defined ( ZDO_SIMPLEDESC_REQUEST )
    197              case MT_ZDO_SIMPLE_DESC_REQ:
    198                MT_ZdoSimpleDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_4:
   \   000068                ; Setup parameters for call to function MT_ZdoSimpleDescRequest
   \   000068   12....       LCALL   ??MT_ZdoSimpleDescRequest?relay
   \   00006B   8052         SJMP    ??MT_ZdoCommandProcessing_22
    199                break;
    200          #endif
    201          
    202          #if defined ( ZDO_ACTIVEEP_REQUEST )
    203              case MT_ZDO_ACTIVE_EP_REQ:
    204                MT_ZdoActiveEpRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_5:
   \   00006D                ; Setup parameters for call to function MT_ZdoActiveEpRequest
   \   00006D   12....       LCALL   ??MT_ZdoActiveEpRequest?relay
   \   000070   804D         SJMP    ??MT_ZdoCommandProcessing_22
    205                break;
    206          #endif
    207          
    208          #if defined ( ZDO_MATCH_REQUEST )
    209              case MT_ZDO_MATCH_DESC_REQ:
    210                MT_ZdoMatchDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_6:
   \   000072                ; Setup parameters for call to function MT_ZdoMatchDescRequest
   \   000072   12....       LCALL   ??MT_ZdoMatchDescRequest?relay
   \   000075   8048         SJMP    ??MT_ZdoCommandProcessing_22
    211                break;
    212          #endif
    213          
    214          #if defined ( ZDO_COMPLEXDESC_REQUEST )
    215              case MT_ZDO_COMPLEX_DESC_REQ:
    216                MT_ZdoComplexDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_7:
   \   000077                ; Setup parameters for call to function MT_ZdoComplexDescRequest
   \   000077   12....       LCALL   ??MT_ZdoComplexDescRequest?relay
   \   00007A   8043         SJMP    ??MT_ZdoCommandProcessing_22
    217                break;
    218          #endif
    219          
    220          #if defined ( ZDO_USERDESC_REQUEST )
    221              case MT_ZDO_USER_DESC_REQ:
    222                MT_ZdoUserDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_8:
   \   00007C                ; Setup parameters for call to function MT_ZdoUserDescRequest
   \   00007C   12....       LCALL   ??MT_ZdoUserDescRequest?relay
   \   00007F   803E         SJMP    ??MT_ZdoCommandProcessing_22
    223                break;
    224          #endif
    225          
    226          #if defined ( ZDO_ENDDEVICE_ANNCE )
    227              case MT_ZDO_END_DEV_ANNCE:
    228                MT_ZdoEndDevAnnce(pBuf);
   \                     ??MT_ZdoCommandProcessing_9:
   \   000081                ; Setup parameters for call to function MT_ZdoEndDevAnnce
   \   000081   12....       LCALL   ??MT_ZdoEndDevAnnce?relay
   \   000084   8039         SJMP    ??MT_ZdoCommandProcessing_22
    229                break;
    230          #endif      
    231          
    232          #if defined ( ZDO_USERDESCSET_REQUEST )
    233              case MT_ZDO_USER_DESC_SET:
    234                MT_ZdoUserDescSet(pBuf);
   \                     ??MT_ZdoCommandProcessing_10:
   \   000086                ; Setup parameters for call to function MT_ZdoUserDescSet
   \   000086   12....       LCALL   ??MT_ZdoUserDescSet?relay
   \   000089   8034         SJMP    ??MT_ZdoCommandProcessing_22
    235                break;
    236          #endif
    237          
    238          #if defined ( ZDO_SERVERDISC_REQUEST )
    239              case MT_ZDO_SERVICE_DISC_REQ:
    240                MT_ZdoServiceDiscRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_11:
   \   00008B                ; Setup parameters for call to function MT_ZdoServiceDiscRequest
   \   00008B   12....       LCALL   ??MT_ZdoServiceDiscRequest?relay
   \   00008E   802F         SJMP    ??MT_ZdoCommandProcessing_22
    241                break;
    242          #endif
    243          
    244          #if defined ( ZDO_ENDDEVICEBIND_REQUEST )
    245              case MT_ZDO_END_DEV_BIND_REQ:
    246                MT_ZdoEndDevBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_12:
   \   000090                ; Setup parameters for call to function MT_ZdoEndDevBindRequest
   \   000090   12....       LCALL   ??MT_ZdoEndDevBindRequest?relay
   \   000093   802A         SJMP    ??MT_ZdoCommandProcessing_22
    247                break;
    248          #endif
    249          
    250          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    251              case MT_ZDO_BIND_REQ:
    252                MT_ZdoBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_13:
   \   000095                ; Setup parameters for call to function MT_ZdoBindRequest
   \   000095   12....       LCALL   ??MT_ZdoBindRequest?relay
   \   000098   8025         SJMP    ??MT_ZdoCommandProcessing_22
    253                break;
    254          #endif
    255          
    256          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    257              case MT_ZDO_UNBIND_REQ:
    258                MT_ZdoUnbindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_14:
   \   00009A                ; Setup parameters for call to function MT_ZdoUnbindRequest
   \   00009A   12....       LCALL   ??MT_ZdoUnbindRequest?relay
   \   00009D   8020         SJMP    ??MT_ZdoCommandProcessing_22
    259                break;
    260          #endif
    261                
    262          #if defined ( ZDO_LINK_KEY_MANAGEMENT )
    263              case MT_ZDO_SET_LINK_KEY:
    264                MT_ZdoSetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_15:
   \   00009F                ; Setup parameters for call to function MT_ZdoSetLinkKey
   \   00009F   12....       LCALL   ??MT_ZdoSetLinkKey?relay
   \   0000A2   801B         SJMP    ??MT_ZdoCommandProcessing_22
    265                break;
    266          
    267              case MT_ZDO_REMOVE_LINK_KEY:
    268                MT_ZdoRemoveLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_16:
   \   0000A4                ; Setup parameters for call to function MT_ZdoRemoveLinkKey
   \   0000A4   12....       LCALL   ??MT_ZdoRemoveLinkKey?relay
   \   0000A7   8016         SJMP    ??MT_ZdoCommandProcessing_22
    269                break;
    270          
    271              case MT_ZDO_GET_LINK_KEY:
    272                MT_ZdoGetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_17:
   \   0000A9                ; Setup parameters for call to function MT_ZdoGetLinkKey
   \   0000A9   12....       LCALL   ??MT_ZdoGetLinkKey?relay
   \   0000AC   8011         SJMP    ??MT_ZdoCommandProcessing_22
    273                break;
    274          #endif      
    275          
    276          #if defined ( ZDO_MGMT_NWKDISC_REQUEST )
    277              case MT_ZDO_MGMT_NWKDISC_REQ:
    278                MT_ZdoMgmtNwkDiscRequest(pBuf);
    279                break;
    280          #endif
    281          
    282          #if defined ( ZDO_MGMT_LQI_REQUEST )
    283              case MT_ZDO_MGMT_LQI_REQ:
    284                MT_ZdoMgmtLqiRequest(pBuf);
    285                break;
    286          #endif
    287          
    288          #if defined ( ZDO_MGMT_RTG_REQUEST )
    289              case MT_ZDO_MGMT_RTG_REQ:
    290                MT_ZdoMgmtRtgRequest(pBuf);
    291                break;
    292          #endif
    293          
    294          #if defined ( ZDO_MGMT_BIND_REQUEST )
    295              case MT_ZDO_MGMT_BIND_REQ:
    296                MT_ZdoMgmtBindRequest(pBuf);
    297                break;
    298          #endif
    299          
    300          #if defined ( ZDO_MGMT_LEAVE_REQUEST )
    301              case MT_ZDO_MGMT_LEAVE_REQ:
    302                MT_ZdoMgmtLeaveRequest(pBuf);
    303                break;
    304          #endif
    305          
    306          #if defined ( ZDO_MGMT_JOINDIRECT_REQUEST )
    307              case MT_ZDO_MGMT_DIRECT_JOIN_REQ:
    308                MT_ZdoMgmtDirectJoinRequest(pBuf);
    309                break;
    310          #endif
    311          
    312          #if defined ( ZDO_MGMT_PERMIT_JOIN_REQUEST )
    313              case MT_ZDO_MGMT_PERMIT_JOIN_REQ:
    314                MT_ZdoMgmtPermitJoinRequest(pBuf);
    315                break;
    316          #endif
    317          
    318          #if defined ( ZDO_MGMT_NWKUPDATE_REQUEST )
    319              case MT_ZDO_MGMT_NWK_UPDATE_REQ:
    320                MT_ZdoMgmtNwkUpdateRequest(pBuf);
    321                break;
    322          #endif 
    323          
    324          #if defined ( ZDO_NETWORKSTART_REQUEST )
    325              case MT_ZDO_STARTUP_FROM_APP:
    326                MT_ZdoStartupFromApp(pBuf);
   \                     ??MT_ZdoCommandProcessing_20:
   \   0000AE                ; Setup parameters for call to function MT_ZdoStartupFromApp
   \   0000AE   12....       LCALL   ??MT_ZdoStartupFromApp?relay
   \   0000B1   800C         SJMP    ??MT_ZdoCommandProcessing_22
    327                break;
    328          #endif
    329          
    330              case MT_ZDO_MSG_CB_REGISTER:
    331                MT_ZdoRegisterForZDOMsg(pBuf);
   \                     ??MT_ZdoCommandProcessing_18:
   \   0000B3                ; Setup parameters for call to function MT_ZdoRegisterForZDOMsg
   \   0000B3   12....       LCALL   ??MT_ZdoRegisterForZDOMsg?relay
   \   0000B6   8007         SJMP    ??MT_ZdoCommandProcessing_22
    332                break;
    333          
    334              case MT_ZDO_MSG_CB_REMOVE:
    335                MT_ZdoRemoveRegisteredCB(pBuf);
   \                     ??MT_ZdoCommandProcessing_19:
   \   0000B8                ; Setup parameters for call to function MT_ZdoRemoveRegisteredCB
   \   0000B8   12....       LCALL   ??MT_ZdoRemoveRegisteredCB?relay
   \   0000BB   8002         SJMP    ??MT_ZdoCommandProcessing_22
    336                break;
    337          
    338              default:
    339                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_ZdoCommandProcessing_21:
   \   0000BD   0E           INC     R6
   \   0000BE   0E           INC     R6
    340                break;
    341            }
    342          
    343            return status;
   \                     ??MT_ZdoCommandProcessing_22:
   \   0000BF   EE           MOV     A,R6
   \   0000C0   F9           MOV     R1,A
   \   0000C1   80..         SJMP    ??Subroutine56_0
    344          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine56_0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    345          
    346          /***************************************************************************************************
    347           * @fn      MT_ZdoNwkAddrReq
    348           *
    349           * @brief   Handle a nwk address request.
    350           *
    351           * @param   pData  - MT message data
    352           *
    353           * @return  void
    354           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    355          void MT_ZdoNWKAddressRequest(uint8 *pBuf)
   \                     MT_ZdoNWKAddressRequest:
    356          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    357            uint8 cmdId;
    358            uint8 retValue;
    359            uint8 reqType;
    360            uint8 startIndex;
    361            uint8 *pExtAddr;
    362          
    363            /* parse header */
    364            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 0,A
    365            pBuf += MT_RPC_FRAME_HDR_SZ;
    366          
    367            /* parse parameters */
    368            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   FE           MOV     R6,A
   \   000017   EB           MOV     A,R3
   \   000018   3400         ADDC    A,#0x0
   \   00001A   FF           MOV     R7,A
    369            pBuf += Z_EXTADDR_LEN;
   \   00001B   EE           MOV     A,R6
   \   00001C   2408         ADD     A,#0x8
   \   00001E   FA           MOV     R2,A
   \   00001F   EF           MOV     A,R7
   \   000020   3400         ADDC    A,#0x0
   \   000022   FB           MOV     R3,A
    370          
    371            /* Request type */
    372            reqType = *pBuf++;
   \   000023   12....       LCALL   ?Subroutine12 & 0xFFFF
    373          
    374            /* Start index */
    375            startIndex = *pBuf;
    376          
    377            retValue = (uint8)ZDP_NwkAddrReq(pExtAddr, reqType, startIndex, 0);
   \                     ??CrossCallReturnLabel_21:
   \   000026   12....       LCALL   ??ZDP_NwkAddrReq?relay
   \   000029                REQUIRE ?Subroutine50
   \   000029                ; // Fall through to label ?Subroutine50
    378          
    379            /* Build and send back the response */
    380            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    381          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   000003   80..         SJMP    ??Subroutine55_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine55_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine56_0
   \   000003                ; // Fall through to label ??Subroutine56_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F9           MOV     R1,A
   \   000006   A3           INC     DPTR
   \   000007                ; Setup parameters for call to function ZDP_NwkAddrReq
   \   000007                ; Setup parameters for call to function ZDP_IEEEAddrReq
   \   000007   7D00         MOV     R5,#0x0
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   FC           MOV     R4,A
   \   00000B   EE           MOV     A,R6
   \   00000C   FA           MOV     R2,A
   \   00000D   EF           MOV     A,R7
   \   00000E   FB           MOV     R3,A
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   7965         MOV     R1,#0x65
   \   000002   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   E9           MOV     A,R1
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008   AC82         MOV     R4,DPL
   \   00000A   AD83         MOV     R5,DPH
   \   00000C   7B01         MOV     R3,#0x1
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000003   AA..         MOV     R2,?V0 + 0
   \   000005   02....       LJMP    ?Subroutine46 & 0xFFFF
    382          
    383          /***************************************************************************************************
    384           * @fn      MT_ZdoIEEEAddrRequest
    385           *
    386           * @brief   Handle a IEEE address request.
    387           *
    388           * @param   pData  - MT message data
    389           *
    390           * @return  void
    391           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    392          void MT_ZdoIEEEAddrRequest (uint8 *pBuf)
   \                     MT_ZdoIEEEAddrRequest:
    393          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    394            uint8 cmdId;
    395            uint8 retValue;
    396            uint16 shortAddr;
    397            uint8 reqType;
    398            uint8 startIndex;
    399          
    400            /* parse header */
    401            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine5 & 0xFFFF
    402            pBuf += MT_RPC_FRAME_HDR_SZ;
    403          
    404            /* Dev address */
    405            shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
    406            pBuf += 2;
    407          
    408            /* request type */
    409            reqType = *pBuf++;
   \                     ??CrossCallReturnLabel_13:
   \   00000D   12....       LCALL   ?Subroutine12 & 0xFFFF
    410          
    411            /* start index */
    412            startIndex = *pBuf;
    413          
    414            retValue = (uint8)ZDP_IEEEAddrReq(shortAddr, reqType, startIndex, 0);
   \                     ??CrossCallReturnLabel_22:
   \   000010   12....       LCALL   ??ZDP_IEEEAddrReq?relay
   \   000013   80..         SJMP    ?Subroutine50
    415          
    416            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    417          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   FC           MOV     R4,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F5..         MOV     ?V0 + 0,A
   \   000009   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00000C   FE           MOV     R6,A
   \   00000D   E9           MOV     A,R1
   \   00000E   FF           MOV     R7,A
   \   00000F   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   EA           MOV     A,R2
   \   000001                REQUIRE ?Subroutine45
   \   000001                REQUIRE ??Subroutine62_0
   \   000001                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   2402         ADD     A,#0x2
   \   000002                REQUIRE ?Subroutine45
   \   000002                ; // Fall through to label ?Subroutine45

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   0A           INC     R2
   \   000001   0A           INC     R2
   \   000002   EB           MOV     A,R3
   \   000003   3400         ADDC    A,#0x0
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   EA           MOV     A,R2
   \   000001   2403         ADD     A,#0x3
   \   000003   0A           INC     R2
   \   000004   80..         SJMP    ?Subroutine45

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000003                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000003                ; Setup parameters for call to function ZDO_RemoveRegisteredCB
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000006   F9           MOV     R1,A
   \   000007   EC           MOV     A,R4
   \   000008   22           RET
    418          
    419          /***************************************************************************************************
    420           * @fn      MT_ZdoNodeDescRequest
    421           *
    422           * @brief   Handle a Node Descriptor request.
    423           *
    424           * @param   pData  - MT message data
    425           *
    426           * @return  void
    427           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine53_0:
   \   000000   12....       LCALL   ?XSTACK_DISP0_8
   \   000003   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   000006                REQUIRE ??Subroutine54_0
   \   000006                ; // Fall through to label ??Subroutine54_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine54_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000006                REQUIRE ??Subroutine55_0
   \   000006                ; // Fall through to label ??Subroutine55_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    428          void MT_ZdoNodeDescRequest (uint8 *pBuf)
   \                     MT_ZdoNodeDescRequest:
    429          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    430            uint8 cmdId;
    431            uint8 retValue;
    432            zAddrType_t destAddr;
    433            uint16 shortAddr;
    434          
    435            /* parse header */
    436            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    437            pBuf += MT_RPC_FRAME_HDR_SZ;
    438          
    439            /* Destination address */
    440            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_89:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    441            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_0:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    442            pBuf += 2;
    443          
    444            /* Network address of interest */
    445            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    446            pBuf += 2;
    447          
    448            retValue = (uint8)ZDP_NodeDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_27:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7902         MOV     R1,#0x2
   \   00001E   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000021   FD           MOV     R5,A
   \   000022   E9           MOV     A,R1
   \   000023   80..         SJMP    ??Subroutine53_0
    449          
    450            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    451          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000007   7401         MOV     A,#0x1
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000003   740A         MOV     A,#0xa
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_SimpleDescReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003   75..00       MOV     ?V0 + 0,#0x0
   \   000006   78..         MOV     R0,#?V0 + 0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004                REQUIRE ??Subroutine57_0
   \   000004                ; // Fall through to label ??Subroutine57_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine57_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7402         MOV     A,#0x2
   \   000002   F0           MOVX    @DPTR,A
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000006   F9           MOV     R1,A
   \   000007   EC           MOV     A,R4
   \   000008   F8           MOV     R0,A
   \   000009   7401         MOV     A,#0x1
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine59_0:
   \   000000   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   000003   EE           MOV     A,R6
   \   000004   FA           MOV     R2,A
   \   000005                REQUIRE ?Subroutine46
   \   000005                ; // Fall through to label ?Subroutine46

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   FE           MOV     R6,A
   \   000008                ; Setup parameters for call to function ZDSecMgrDeviceRemoveByExtAddr
   \   000008   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   00000B   22           RET
    452          
    453          /***************************************************************************************************
    454           * @fn      MT_ZdoPowerDescRequest
    455           *
    456           * @brief   Handle a Power Descriptor request.
    457           *
    458           * @param   pData  - MT message data
    459           *
    460           * @return  void
    461           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000003                REQUIRE ??Subroutine53_0
   \   000003                ; // Fall through to label ??Subroutine53_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    462          void MT_ZdoPowerDescRequest(uint8 *pBuf)
   \                     MT_ZdoPowerDescRequest:
    463          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    464            uint8 cmdId;
    465            uint8 retValue;
    466            zAddrType_t destAddr;
    467            uint16 shortAddr;
    468          
    469            /* parse header */
    470            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    471            pBuf += MT_RPC_FRAME_HDR_SZ;
    472          
    473            /* Dev address */
    474            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_90:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    475            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_1:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    476            pBuf += 2;
    477          
    478            /* Network address of interest */
    479            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    480            pBuf += 2;
    481          
    482            retValue = (uint8)ZDP_PowerDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_28:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7903         MOV     R1,#0x3
   \   00001E   80..         SJMP    ?Subroutine43
    483          
    484            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    485          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000003   FD           MOV     R5,A
   \   000004   7402         MOV     A,#0x2
   \   000006   22           RET
    486          
    487          /***************************************************************************************************
    488           * @fn      MT_ZdoSimpleDescRequest
    489           *
    490           * @brief   Handle a Simple Descriptor request.
    491           *
    492           * @param   pBuf  - MT message data
    493           *
    494           * @return  void
    495           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    496          void MT_ZdoSimpleDescRequest(uint8 *pBuf)
   \                     MT_ZdoSimpleDescRequest:
    497          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    498            uint8 cmdId;
    499            uint8 retValue;
    500            uint8 epInt;
    501            zAddrType_t destAddr;
    502            uint16 shortAddr;
    503          
    504            /* parse header */
    505            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    506            pBuf += MT_RPC_FRAME_HDR_SZ;
    507          
    508            /* Dev address */
    509            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_91:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    510            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_2:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    511            pBuf += 2;
    512          
    513            /* Network address of interest */
    514            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    515            pBuf += 2;
    516          
    517            /* endpoint/interface */
    518            epInt = *pBuf++;
    519          
    520            retValue = (uint8)ZDP_SimpleDescReq( &destAddr, shortAddr, epInt, 0);
   \                     ??CrossCallReturnLabel_29:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   8A82         MOV     DPL,R2
   \   00001E   8B83         MOV     DPH,R3
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   E0           MOVX    A,@DPTR
   \   000023   F9           MOV     R1,A
   \   000024   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??ZDP_SimpleDescReq?relay
   \   000031   7401         MOV     A,#0x1
   \   000033   02....       LJMP    ??Subroutine54_0 & 0xFFFF
    521          
    522            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    523          }
    524          
    525          /***************************************************************************************************
    526           * @fn      MT_ZdoActiveEpRequest
    527           *
    528           * @brief   Handle a Active EP request.
    529           *
    530           * @param   pBuf  - MT message data
    531           *
    532           * @return  void
    533           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    534          void MT_ZdoActiveEpRequest(uint8 *pBuf)
   \                     MT_ZdoActiveEpRequest:
    535          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    536            uint8 cmdId;
    537            uint8 retValue;
    538            zAddrType_t destAddr;
    539            uint16 shortAddr;
    540          
    541            /* parse header */
    542            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    543            pBuf += MT_RPC_FRAME_HDR_SZ;
    544          
    545            /* Dev address */
    546            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_92:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    547            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_3:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    548            pBuf += 2;
    549          
    550            /* Network address of interest */
    551            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    552            pBuf += 2;
    553          
    554            retValue = (uint8)ZDP_ActiveEPReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_30:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7905         MOV     R1,#0x5
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    555          
    556            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    557          }
    558          
    559          /***************************************************************************************************
    560           * @fn      MT_ZdoMatchDescRequest
    561           *
    562           * @brief   Handle a Match Descriptor request.
    563           *
    564           * @param   pBuf  - MT message data
    565           *
    566           * @return  void
    567           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    568          void MT_ZdoMatchDescRequest(uint8 *pBuf)
   \                     MT_ZdoMatchDescRequest:
    569          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 74
   \   000005   74B6         MOV     A,#-0x4a
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    570            uint8 cmdId;
    571            uint8 retValue = 0;
   \   00000A   12....       LCALL   ?Subroutine0 & 0xFFFF
    572            uint8 i, numInClusters, numOutClusters;
    573            uint16 profileId;
    574            zAddrType_t destAddr;
    575            uint16 shortAddr;
    576            uint16 inClusters[MTZDO_MAX_MATCH_CLUSTERS], outClusters[MTZDO_MAX_MATCH_CLUSTERS];
    577          
    578            /* parse header */
    579            cmdId = pBuf[MT_RPC_POS_CMD1];
    580            pBuf += MT_RPC_FRAME_HDR_SZ;
    581          
    582            /* Dev address */
    583            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_87:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    584            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_4:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine16 & 0xFFFF
    585            pBuf += 2;
    586          
    587            /* Network address of interest */
    588            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    589            pBuf += 2;
   \                     ??CrossCallReturnLabel_33:
   \   000019   12....       LCALL   ?Subroutine36 & 0xFFFF
    590          
    591            /* Profile ID */
    592            profileId = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_49:
   \   00001C   12....       LCALL   ?Subroutine6 & 0xFFFF
    593            pBuf += 2;
    594          
    595            /* NumInClusters */
    596            numInClusters = *pBuf++;
   \                     ??CrossCallReturnLabel_15:
   \   00001F   FF           MOV     R7,A
   \   000020   A3           INC     DPTR
   \   000021   AA82         MOV     R2,DPL
   \   000023   AB83         MOV     R3,DPH
    597            if ( numInClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   000025   C3           CLR     C
   \   000026   9411         SUBB    A,#0x11
   \   000028   5015         JNC     ??MT_ZdoMatchDescRequest_0
    598            {
    599              /* IN clusters */
    600              for ( i = 0; i < numInClusters; i++ )
   \   00002A   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoMatchDescRequest_1:
   \   00002C   E5..         MOV     A,?V0 + 2
   \   00002E   C3           CLR     C
   \   00002F   9F           SUBB    A,R7
   \   000030   5016         JNC     ??MT_ZdoMatchDescRequest_2
    601              {
    602                inClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000032   12....       LCALL   ?Subroutine8 & 0xFFFF
    603                pBuf += 2;
    604              }
    605            }
   \                     ??CrossCallReturnLabel_63:
   \   000035   742A         MOV     A,#0x2a
   \   000037   12....       LCALL   ?XSTACK_DISP0_8
   \   00003A   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   00003D   80ED         SJMP    ??MT_ZdoMatchDescRequest_1
    606            else
    607            {
    608              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_0:
   \   00003F   7480         MOV     A,#-0x80
   \   000041   85..82       MOV     DPL,?XSP + 0
   \   000044   85..83       MOV     DPH,?XSP + 1
   \   000047   F0           MOVX    @DPTR,A
    609            }
    610          
    611            /* NumOutClusters */
    612            numOutClusters = *pBuf++;
   \                     ??MT_ZdoMatchDescRequest_2:
   \   000048   8A82         MOV     DPL,R2
   \   00004A   8B83         MOV     DPH,R3
   \   00004C   E0           MOVX    A,@DPTR
   \   00004D   F5..         MOV     ?V0 + 6,A
   \   00004F   A3           INC     DPTR
   \   000050   AA82         MOV     R2,DPL
   \   000052   AB83         MOV     R3,DPH
    613            if ( numOutClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   000054   C3           CLR     C
   \   000055   9411         SUBB    A,#0x11
   \   000057   5017         JNC     ??MT_ZdoMatchDescRequest_3
    614            {
    615              /* OUT Clusters */
    616              for ( i = 0; i < numOutClusters; i++ )
   \   000059   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoMatchDescRequest_4:
   \   00005C   E5..         MOV     A,?V0 + 2
   \   00005E   C3           CLR     C
   \   00005F   95..         SUBB    A,?V0 + 6
   \   000061   5011         JNC     ??MT_ZdoMatchDescRequest_5
    617              {
    618                outClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000063   12....       LCALL   ?Subroutine8 & 0xFFFF
    619                pBuf += 2;
    620              }
    621            }
   \                     ??CrossCallReturnLabel_64:
   \   000066   740A         MOV     A,#0xa
   \   000068   12....       LCALL   ?XSTACK_DISP0_8
   \   00006B   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   00006E   80EC         SJMP    ??MT_ZdoMatchDescRequest_4
    622            else
    623            {
    624              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_3:
   \   000070   7480         MOV     A,#-0x80
   \   000072   8053         SJMP    ??MT_ZdoMatchDescRequest_6
    625            }
    626          
    627            if ( retValue == 0 )
   \                     ??MT_ZdoMatchDescRequest_5:
   \   000074   85..82       MOV     DPL,?XSP + 0
   \   000077   85..83       MOV     DPH,?XSP + 1
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   7051         JNZ     ??MT_ZdoMatchDescRequest_7
    628            {
    629              retValue = (uint8)ZDP_MatchDescReq( &destAddr, shortAddr, profileId, numInClusters,
    630                                                 inClusters, numOutClusters, outClusters, 0);
   \   00007D                ; Setup parameters for call to function ZDP_MatchDescReq
   \   00007D   75..00       MOV     ?V0 + 2,#0x0
   \   000080   78..         MOV     R0,#?V0 + 2
   \   000082   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000085   740B         MOV     A,#0xb
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   8582..       MOV     ?V0 + 2,DPL
   \   00008D   8583..       MOV     ?V0 + 3,DPH
   \   000090   78..         MOV     R0,#?V0 + 2
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000095   E5..         MOV     A,?V0 + 6
   \   000097   F5..         MOV     ?V0 + 2,A
   \   000099   78..         MOV     R0,#?V0 + 2
   \   00009B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00009E   742E         MOV     A,#0x2e
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   8582..       MOV     ?V0 + 2,DPL
   \   0000A6   8583..       MOV     ?V0 + 3,DPH
   \   0000A9   78..         MOV     R0,#?V0 + 2
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AE   78..         MOV     R0,#?V0 + 0
   \   0000B0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B3   EF           MOV     A,R7
   \   0000B4   F9           MOV     R1,A
   \   0000B5   7409         MOV     A,#0x9
   \   0000B7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BA   AA82         MOV     R2,DPL
   \   0000BC   AB83         MOV     R3,DPH
   \   0000BE   12....       LCALL   ??ZDP_MatchDescReq?relay
   \   0000C1   7408         MOV     A,#0x8
   \   0000C3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C6   E9           MOV     A,R1
   \                     ??MT_ZdoMatchDescRequest_6:
   \   0000C7   85..82       MOV     DPL,?XSP + 0
   \   0000CA   85..83       MOV     DPH,?XSP + 1
   \   0000CD   F0           MOVX    @DPTR,A
    631            }
    632          
    633            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoMatchDescRequest_7:
   \   0000CE                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000CE   AC82         MOV     R4,DPL
   \   0000D0   AD83         MOV     R5,DPH
   \   0000D2   7B01         MOV     R3,#0x1
   \   0000D4   EE           MOV     A,R6
   \   0000D5   FA           MOV     R2,A
   \   0000D6   7965         MOV     R1,#0x65
   \   0000D8   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    634          }
   \   0000DB   744A         MOV     A,#0x4a
   \   0000DD                REQUIRE ?Subroutine47
   \   0000DD                ; // Fall through to label ?Subroutine47

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F07         MOV     R7,#0x7
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000003   E5..         MOV     A,?V0 + 4
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E5..         MOV     A,?V0 + 5
   \   000009                REQUIRE ??Subroutine58_0
   \   000009                ; // Fall through to label ??Subroutine58_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine58_0:
   \   000000   12....       LCALL   ??Subroutine57_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   05..         INC     ?V0 + 2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F5..         MOV     ?V0 + 4,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F9           MOV     R1,A
   \   00000A   E4           CLR     A
   \   00000B   25..         ADD     A,?V0 + 4
   \   00000D   E9           MOV     A,R1
   \   00000E   F5..         MOV     ?V0 + 5,A
   \   000010                REQUIRE ?Subroutine44
   \   000010                ; // Fall through to label ?Subroutine44

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   E5..         MOV     A,?V0 + 2
   \   000002   33           RLC     A
   \   000003   F8           MOV     R0,A
   \   000004   E4           CLR     A
   \   000005   33           RLC     A
   \   000006   F9           MOV     R1,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   E4           CLR     A
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008                REQUIRE ??Subroutine59_0
   \   000008                ; // Fall through to label ??Subroutine59_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   E582         MOV     A,DPL
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   E583         MOV     A,DPH
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000006   FD           MOV     R5,A
   \   000007   EA           MOV     A,R2
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 0,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F8           MOV     R0,A
   \   000006   E4           CLR     A
   \   000007   C8           XCH     A,R0
   \   000008   F5..         MOV     ?V0 + 1,A
   \   00000A   EA           MOV     A,R2
   \   00000B   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   12....       LCALL   ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   8A82         MOV     DPL,R2
   \   000005   8B83         MOV     DPH,R3
   \   000007   22           RET
    635          
    636          /***************************************************************************************************
    637           * @fn      MT_ZdoComplexDescRequest
    638           *
    639           * @brief   Handle a Complex Descriptor request.
    640           *
    641           * @param   pBuf  - MT message data
    642           *
    643           * @return  void
    644           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    645          void MT_ZdoComplexDescRequest(uint8 *pBuf)
   \                     MT_ZdoComplexDescRequest:
    646          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    647            uint8 cmdId;
    648            uint8 retValue;
    649            zAddrType_t destAddr;
    650            uint16 shortAddr;
    651          
    652            /* parse header */
    653            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    654            pBuf += MT_RPC_FRAME_HDR_SZ;
    655          
    656            /* Dev address */
    657            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_93:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    658            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_5:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    659            pBuf += 2;
    660          
    661            /* Network address of interest */
    662            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    663            pBuf += 2;
    664          
    665            retValue = (uint8)ZDP_ComplexDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_31:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7910         MOV     R1,#0x10
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    666          
    667            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    668          }
    669          
    670          /***************************************************************************************************
    671           * @fn      MT_ZdoUserDescRequest
    672           *
    673           * @brief   Handle a User Descriptor request.
    674           *
    675           * @param   pBuf  - MT message data
    676           *
    677           * @return  void
    678           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    679          void MT_ZdoUserDescRequest(uint8 *pBuf)
   \                     MT_ZdoUserDescRequest:
    680          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    681            uint8 cmdId;
    682            uint8 retValue;
    683            zAddrType_t destAddr;
    684            uint16 shortAddr;
    685          
    686            /* parse header */
    687            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    688            pBuf += MT_RPC_FRAME_HDR_SZ;
    689          
    690            /* Dev address */
    691            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_94:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    692            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_6:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    693            pBuf += 2;
    694          
    695            /* Network address of interest */
    696            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
    697            pBuf += 2;
    698          
    699            retValue = (uint8)ZDP_UserDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_32:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7911         MOV     R1,#0x11
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    700          
    701            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    702          }
    703          
    704          /***************************************************************************************************
    705           * @fn      MT_ZdoEndDevAnnce
    706           *
    707           * @brief   Handle a End Device Announce Descriptor request.
    708           *
    709           * @param   pBuf  - MT message data
    710           *
    711           * @return  void
    712           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    713          void MT_ZdoEndDevAnnce(uint8 *pBuf)
   \                     MT_ZdoEndDevAnnce:
    714          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    715            uint8 cmdId;
    716            uint8 retValue;
    717            uint16 shortAddr;
    718            uint8 *pIEEEAddr;
    719          
    720            /* parse header */
    721            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8C82         MOV     DPL,R4
   \   000010   8D83         MOV     DPH,R5
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FE           MOV     R6,A
    722            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000016   EC           MOV     A,R4
   \   000017   2403         ADD     A,#0x3
   \   000019   0C           INC     R4
   \   00001A   0C           INC     R4
   \   00001B   0C           INC     R4
   \   00001C   ED           MOV     A,R5
   \   00001D   3400         ADDC    A,#0x0
   \   00001F   FD           MOV     R5,A
    723          
    724            /* network address */
    725            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000020   8C82         MOV     DPL,R4
   \   000022   8D83         MOV     DPH,R5
   \   000024   E0           MOVX    A,@DPTR
   \   000025   FA           MOV     R2,A
   \   000026   A3           INC     DPTR
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F8           MOV     R0,A
   \   000029   E4           CLR     A
   \   00002A   C8           XCH     A,R0
   \   00002B   FB           MOV     R3,A
    726            pBuf += 2;
   \   00002C   EC           MOV     A,R4
   \   00002D   2402         ADD     A,#0x2
   \   00002F   0C           INC     R4
   \   000030   0C           INC     R4
   \   000031   ED           MOV     A,R5
   \   000032   3400         ADDC    A,#0x0
   \   000034   FD           MOV     R5,A
    727          
    728            /* extended address */
    729            pIEEEAddr = pBuf;
    730            pBuf += Z_EXTADDR_LEN;
    731          
    732            retValue = (uint8)ZDP_DeviceAnnce( shortAddr, pIEEEAddr, *pBuf, 0);
   \   000035                ; Setup parameters for call to function ZDP_DeviceAnnce
   \   000035   88..         MOV     ?V0 + 0,R0
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00003C   8C82         MOV     DPL,R4
   \   00003E   8D83         MOV     DPH,R5
   \   000040   A3           INC     DPTR
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   E0           MOVX    A,@DPTR
   \   000049   F9           MOV     R1,A
   \   00004A   12....       LCALL   ??ZDP_DeviceAnnce?relay
   \   00004D   7401         MOV     A,#0x1
   \   00004F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000052                REQUIRE ?Subroutine51
   \   000052                ; // Fall through to label ?Subroutine51
    733          
    734            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    735          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   000003   02....       LJMP    ??Subroutine55_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET
    736          
    737          /***************************************************************************************************
    738           * @fn      MT_ZdoUserDescSet
    739           *
    740           * @brief   Handle a User Descriptor Set.
    741           *
    742           * @param   pBuf  - MT message data
    743           *
    744           * @return  void
    745           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    746          void MT_ZdoUserDescSet(uint8 *pBuf)
   \                     MT_ZdoUserDescSet:
    747          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 27
   \   000005   74E5         MOV     A,#-0x1b
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    748            uint8 cmdId;
    749            uint8 retValue;
    750            zAddrType_t destAddr;
    751            uint16 shortAddr;
    752            UserDescriptorFormat_t userDesc;
    753          
    754            /* parse header */
    755            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 3,A
    756            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   12....       LCALL   ?Subroutine39 & 0xFFFF
    757          
    758            /* Dev address */
    759            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_100:
   \   000016   7409         MOV     A,#0x9
   \   000018   12....       LCALL   ?XSTACK_DISP0_8
   \   00001B   12....       LCALL   ?Subroutine1 & 0xFFFF
    760            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_7:
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   E8           MOV     A,R0
   \   000022   F0           MOVX    @DPTR,A
   \   000023   A3           INC     DPTR
   \   000024   E9           MOV     A,R1
   \   000025   F0           MOVX    @DPTR,A
    761            pBuf += 2;
   \   000026   12....       LCALL   ?Subroutine17 & 0xFFFF
    762          
    763            /* Network address of interest */
    764            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_97:
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F8           MOV     R0,A
   \   00002D   E4           CLR     A
   \   00002E   C8           XCH     A,R0
   \   00002F   F9           MOV     R1,A
   \   000030   EC           MOV     A,R4
   \   000031   FE           MOV     R6,A
   \   000032   E9           MOV     A,R1
   \   000033   FF           MOV     R7,A
    765            pBuf += 2;
   \   000034   12....       LCALL   ?Subroutine17 & 0xFFFF
    766          
    767            /* User descriptor */
    768            userDesc.len = *pBuf++;
   \                     ??CrossCallReturnLabel_98:
   \   000037   C0E0         PUSH    A
   \   000039   740A         MOV     A,#0xa
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   D0E0         POP     A
   \   000040   F0           MOVX    @DPTR,A
   \   000041   8A82         MOV     DPL,R2
   \   000043   8B83         MOV     DPH,R3
   \   000045   A3           INC     DPTR
   \   000046   AA82         MOV     R2,DPL
   \   000048   AB83         MOV     R3,DPH
    769            osal_memcpy( userDesc.desc, pBuf, userDesc.len );
   \   00004A                ; Setup parameters for call to function osal_memcpy
   \   00004A   8A..         MOV     ?V0 + 0,R2
   \   00004C   8B..         MOV     ?V0 + 1,R3
   \   00004E   88..         MOV     ?V0 + 2,R0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000055   740D         MOV     A,#0xd
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   FC           MOV     R4,A
   \   00005C   7D00         MOV     R5,#0x0
   \   00005E   740E         MOV     A,#0xe
   \   000060   12....       LCALL   ?XSTACK_DISP0_8
   \   000063   AA82         MOV     R2,DPL
   \   000065   AB83         MOV     R3,DPH
   \   000067   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   00006A   12....       LCALL   ?DEALLOC_XSTACK8
    770            pBuf += 16;
    771          
    772            retValue = (uint8)ZDP_UserDescSet( &destAddr, shortAddr, &userDesc, 0);
   \   00006D                ; Setup parameters for call to function ZDP_UserDescSet
   \   00006D   740A         MOV     A,#0xa
   \   00006F   12....       LCALL   ?XSTACK_DISP0_8
   \   000072   8582..       MOV     ?V0 + 0,DPL
   \   000075   8583..       MOV     ?V0 + 1,DPH
   \   000078   78..         MOV     R0,#?V0 + 0
   \   00007A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007D   7900         MOV     R1,#0x0
   \   00007F   EE           MOV     A,R6
   \   000080   FC           MOV     R4,A
   \   000081   EF           MOV     A,R7
   \   000082   FD           MOV     R5,A
   \   000083   7403         MOV     A,#0x3
   \   000085   12....       LCALL   ?XSTACK_DISP0_8
   \   000088   AA82         MOV     R2,DPL
   \   00008A   AB83         MOV     R3,DPH
   \   00008C   12....       LCALL   ??ZDP_UserDescSet?relay
   \   00008F   7402         MOV     A,#0x2
   \   000091   12....       LCALL   ?DEALLOC_XSTACK8
   \   000094   12....       LCALL   ?Subroutine42 & 0xFFFF
    773          
    774            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??CrossCallReturnLabel_73:
   \   000097   AA..         MOV     R2,?V0 + 3
   \   000099   7965         MOV     R1,#0x65
   \   00009B   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    775          }
   \   00009E   741B         MOV     A,#0x1b
   \   0000A0                REQUIRE ?Subroutine48
   \   0000A0                ; // Fall through to label ?Subroutine48

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F04         MOV     R7,#0x4
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   EA           MOV     A,R2
   \   000001   2402         ADD     A,#0x2
   \   000003   0A           INC     R2
   \   000004   0A           INC     R2
   \   000005                REQUIRE ??Subroutine60_0
   \   000005                ; // Fall through to label ??Subroutine60_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine60_0:
   \   000000   EB           MOV     A,R3
   \   000001   3400         ADDC    A,#0x0
   \   000003   FB           MOV     R3,A
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   E0           MOVX    A,@DPTR
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine63_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET
    776          
    777          /***************************************************************************************************
    778           * @fn      MT_ZdoServiceDiscRequest
    779           *
    780           * @brief   Handle a Server Discovery request.
    781           *
    782           * @param   pBuf  - MT message data
    783           *
    784           * @return  void
    785           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    786          void MT_ZdoServiceDiscRequest(uint8 *pBuf)
   \                     MT_ZdoServiceDiscRequest:
    787          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    788            uint8 cmdId;
    789            uint8 retValue;
    790            uint16 serviceMask;
    791          
    792            /* parse header */
    793            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine11 & 0xFFFF
    794            pBuf += MT_RPC_FRAME_HDR_SZ;
    795          
    796            /* Service Mask */
    797            serviceMask = BUILD_UINT16( pBuf[0], pBuf[1]);
    798            pBuf += 2;
    799          
    800            retValue = (uint8)ZDP_ServerDiscReq( serviceMask, 0);
   \                     ??CrossCallReturnLabel_19:
   \   00000D                ; Setup parameters for call to function ZDP_ServerDiscReq
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000012   FB           MOV     R3,A
   \   000013   EC           MOV     A,R4
   \   000014   FA           MOV     R2,A
   \   000015   12....       LCALL   ??ZDP_ServerDiscReq?relay
   \   000018   02....       LJMP    ?Subroutine51 & 0xFFFF
    801          
    802            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    803          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   22           RET
    804          
    805          /***************************************************************************************************
    806           * @fn      MT_ZdoEndDevBindRequest
    807           *
    808           * @brief   Handle a End Device Bind request.
    809           *
    810           * @param   pBuf  - MT message data
    811           *
    812           * @return  void
    813           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    814          void MT_ZdoEndDevBindRequest(uint8 *pBuf)
   \                     MT_ZdoEndDevBindRequest:
    815          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 70
   \   000005   74BA         MOV     A,#-0x46
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    816            uint8 cmdId;
    817            uint8 retValue = 0;
   \   00000A   12....       LCALL   ?Subroutine0 & 0xFFFF
    818            uint8 i, epInt, numInClusters, numOutClusters;
    819            zAddrType_t destAddr;
    820            uint16 shortAddr;
    821            uint16 profileID, inClusters[MTZDO_MAX_ED_BIND_CLUSTERS], outClusters[MTZDO_MAX_ED_BIND_CLUSTERS];
    822          
    823            /* parse header */
    824            cmdId = pBuf[MT_RPC_POS_CMD1];
    825            pBuf += MT_RPC_FRAME_HDR_SZ;
    826          
    827            /* Dev address */
    828            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_88:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    829            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_8:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine16 & 0xFFFF
    830            pBuf += 2;
    831          
    832            /* Local coordinator of the binding */
    833            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    834            pBuf += 2;
    835            
    836            /* For now, skip past the extended address */
    837            pBuf += Z_EXTADDR_LEN;
   \                     ??CrossCallReturnLabel_34:
   \   000019   240A         ADD     A,#0xa
   \   00001B   FA           MOV     R2,A
   \   00001C   12....       LCALL   ??Subroutine60_0 & 0xFFFF
    838          
    839            /* Endpoint */
    840            epInt = *pBuf++;
   \                     ??CrossCallReturnLabel_99:
   \   00001F   FF           MOV     R7,A
   \   000020   A3           INC     DPTR
   \   000021   AA82         MOV     R2,DPL
   \   000023   AB83         MOV     R3,DPH
    841          
    842            /* Profile ID */
    843            profileID = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000025   12....       LCALL   ?Subroutine6 & 0xFFFF
    844            pBuf += 2;
    845          
    846            /* NumInClusters */
    847            numInClusters = *pBuf++;
   \                     ??CrossCallReturnLabel_16:
   \   000028   F5..         MOV     ?V0 + 4,A
   \   00002A   A3           INC     DPTR
   \   00002B   0A           INC     R2
   \   00002C   AB83         MOV     R3,DPH
    848            if ( numInClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   00002E   C3           CLR     C
   \   00002F   9410         SUBB    A,#0x10
   \   000031   5019         JNC     ??MT_ZdoEndDevBindRequest_0
    849            {
    850              for ( i = 0; i < numInClusters; i++ )
   \   000033   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoEndDevBindRequest_1:
   \   000035   E5..         MOV     A,?V0 + 2
   \   000037   C3           CLR     C
   \   000038   95..         SUBB    A,?V0 + 4
   \   00003A   5019         JNC     ??MT_ZdoEndDevBindRequest_2
    851              {
    852                inClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00003C   12....       LCALL   ?Subroutine9 & 0xFFFF
    853                pBuf += 2;
    854              }
    855            }
   \                     ??CrossCallReturnLabel_65:
   \   00003F   7428         MOV     A,#0x28
   \   000041   12....       LCALL   ?XSTACK_DISP0_8
   \   000044   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000047   12....       LCALL   ??Subroutine58_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   00004A   80E9         SJMP    ??MT_ZdoEndDevBindRequest_1
    856            else
    857              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_0:
   \   00004C   7480         MOV     A,#-0x80
   \   00004E   85..82       MOV     DPL,?XSP + 0
   \   000051   85..83       MOV     DPH,?XSP + 1
   \   000054   F0           MOVX    @DPTR,A
    858          
    859            /* NumOutClusters */
    860            numOutClusters = *pBuf++;
   \                     ??MT_ZdoEndDevBindRequest_2:
   \   000055   8A82         MOV     DPL,R2
   \   000057   8B83         MOV     DPH,R3
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   F5..         MOV     ?V0 + 5,A
   \   00005C   A3           INC     DPTR
   \   00005D   AA82         MOV     R2,DPL
   \   00005F   AB83         MOV     R3,DPH
    861            if ( numOutClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   000061   C3           CLR     C
   \   000062   9410         SUBB    A,#0x10
   \   000064   501A         JNC     ??MT_ZdoEndDevBindRequest_3
    862            {
    863              for ( i = 0; i < numOutClusters; i++ )
   \   000066   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoEndDevBindRequest_4:
   \   000069   E5..         MOV     A,?V0 + 2
   \   00006B   C3           CLR     C
   \   00006C   95..         SUBB    A,?V0 + 5
   \   00006E   5014         JNC     ??MT_ZdoEndDevBindRequest_5
    864              {
    865                outClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   000070   12....       LCALL   ?Subroutine9 & 0xFFFF
    866                pBuf += 2;
    867              }
    868            }
   \                     ??CrossCallReturnLabel_66:
   \   000073   740A         MOV     A,#0xa
   \   000075   12....       LCALL   ?XSTACK_DISP0_8
   \   000078   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00007B   12....       LCALL   ??Subroutine58_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   00007E   80E9         SJMP    ??MT_ZdoEndDevBindRequest_4
    869            else
    870              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_3:
   \   000080   7480         MOV     A,#-0x80
   \   000082   805C         SJMP    ??MT_ZdoEndDevBindRequest_6
    871            
    872            if ( retValue == 0 )
   \                     ??MT_ZdoEndDevBindRequest_5:
   \   000084   85..82       MOV     DPL,?XSP + 0
   \   000087   85..83       MOV     DPH,?XSP + 1
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   705A         JNZ     ??MT_ZdoEndDevBindRequest_7
    873            {
    874              retValue = (uint8)ZDP_EndDeviceBindReq( &destAddr, shortAddr, epInt, profileID,
    875                                                    numInClusters, inClusters, numOutClusters, outClusters, 0);
   \   00008D                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00008D   75..00       MOV     ?V0 + 2,#0x0
   \   000090   78..         MOV     R0,#?V0 + 2
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000095   740B         MOV     A,#0xb
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   8582..       MOV     ?V0 + 2,DPL
   \   00009D   8583..       MOV     ?V0 + 3,DPH
   \   0000A0   78..         MOV     R0,#?V0 + 2
   \   0000A2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A5   E5..         MOV     A,?V0 + 5
   \   0000A7   F5..         MOV     ?V0 + 2,A
   \   0000A9   78..         MOV     R0,#?V0 + 2
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000AE   742C         MOV     A,#0x2c
   \   0000B0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B3   8582..       MOV     ?V0 + 2,DPL
   \   0000B6   8583..       MOV     ?V0 + 3,DPH
   \   0000B9   78..         MOV     R0,#?V0 + 2
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BE   E5..         MOV     A,?V0 + 4
   \   0000C0   F5..         MOV     ?V0 + 2,A
   \   0000C2   78..         MOV     R0,#?V0 + 2
   \   0000C4   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000C7   78..         MOV     R0,#?V0 + 0
   \   0000C9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CC   EF           MOV     A,R7
   \   0000CD   F9           MOV     R1,A
   \   0000CE   740A         MOV     A,#0xa
   \   0000D0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D3   AA82         MOV     R2,DPL
   \   0000D5   AB83         MOV     R3,DPH
   \   0000D7   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   0000DA   7409         MOV     A,#0x9
   \   0000DC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000DF   E9           MOV     A,R1
   \                     ??MT_ZdoEndDevBindRequest_6:
   \   0000E0   85..82       MOV     DPL,?XSP + 0
   \   0000E3   85..83       MOV     DPH,?XSP + 1
   \   0000E6   F0           MOVX    @DPTR,A
    876            }
    877          
    878            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoEndDevBindRequest_7:
   \   0000E7                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000E7   AC82         MOV     R4,DPL
   \   0000E9   AD83         MOV     R5,DPH
   \   0000EB   7B01         MOV     R3,#0x1
   \   0000ED   EE           MOV     A,R6
   \   0000EE   FA           MOV     R2,A
   \   0000EF   7965         MOV     R1,#0x65
   \   0000F1   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    879          }
   \   0000F4   7446         MOV     A,#0x46
   \   0000F6   02....       LJMP    ??Subroutine61_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000003   E5..         MOV     A,?V0 + 6
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E5..         MOV     A,?V0 + 7
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F5..         MOV     ?V0 + 6,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F9           MOV     R1,A
   \   00000A   E4           CLR     A
   \   00000B   25..         ADD     A,?V0 + 6
   \   00000D   E9           MOV     A,R1
   \   00000E   F5..         MOV     ?V0 + 7,A
   \   000010   02....       LJMP    ?Subroutine44 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine61_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA
    880          
    881          /***************************************************************************************************
    882           * @fn      MT_ZdoBindRequest
    883           *
    884           * @brief   Handle a Bind request.
    885           *
    886           * @param   pBuf  - MT message data
    887           *
    888           * @return  void
    889           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    890          void MT_ZdoBindRequest(uint8 *pBuf)
   \                     MT_ZdoBindRequest:
    891          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine10 & 0xFFFF
    892            uint8 cmdId;
    893            uint8 retValue;
    894            zAddrType_t destAddr, devAddr;
    895            uint8 *pSrcAddr, *ptr;
    896            uint8 srcEPInt, dstEPInt;
    897            uint16 clusterID;
    898          
    899            /* parse header */
    900            cmdId = pBuf[MT_RPC_POS_CMD1];
    901            pBuf += MT_RPC_FRAME_HDR_SZ;
    902          
    903            /* Dev address */
    904            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_17:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    905            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_23:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine4 & 0xFFFF
    906            pBuf += 2;
    907          
    908            /* SrcAddress */
    909            pSrcAddr = pBuf;
    910            pBuf += Z_EXTADDR_LEN;
    911          
    912            /* SrcEPInt */
    913            srcEPInt = *pBuf++;
    914          
    915            /* ClusterID */
    916            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
    917            pBuf += 2;
    918          
    919            /* Destination Address mode */
    920            devAddr.addrMode = *pBuf++;
   \                     ??CrossCallReturnLabel_11:
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   12....       LCALL   ?Subroutine23 & 0xFFFF
    921          
    922            /* Destination Address */
    923            if ( devAddr.addrMode == Addr64Bit )
   \                     ??CrossCallReturnLabel_35:
   \   00001F   7012         JNZ     ??MT_ZdoBindRequest_0
    924            {
    925              ptr = pBuf;
    926              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000021                ; Setup parameters for call to function sAddrExtCpy
   \   000021   EE           MOV     A,R6
   \   000022   FC           MOV     R4,A
   \   000023   EF           MOV     A,R7
   \   000024   FD           MOV     R5,A
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??sAddrExtCpy?relay
   \   000031   800B         SJMP    ??MT_ZdoBindRequest_1
    927            }
    928            else
    929            {
    930              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoBindRequest_0:
   \   000033   12....       LCALL   ?Subroutine14 & 0xFFFF
    931            }
   \                     ??CrossCallReturnLabel_25:
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    932            /* The short address occupies LSB two bytes */
    933            pBuf += Z_EXTADDR_LEN;
    934          
    935            /* DstEPInt */
    936            dstEPInt = *pBuf;
    937          
    938            retValue = (uint8)ZDP_BindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoBindRequest_1:
   \   00003E                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   00003E   75..00       MOV     ?V0 + 4,#0x0
   \   000041   78..         MOV     R0,#?V0 + 4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   F5..         MOV     ?V0 + 4,A
   \   000055   78..         MOV     R0,#?V0 + 4
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   7403         MOV     A,#0x3
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   8582..       MOV     ?V0 + 4,DPL
   \   000062   8583..       MOV     ?V0 + 5,DPH
   \   000065   78..         MOV     R0,#?V0 + 4
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006A   78..         MOV     R0,#?V0 + 6
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   78..         MOV     R0,#?V0 + 2
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   A9..         MOV     R1,?V0 + 1
   \   000076   7412         MOV     A,#0x12
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   AC82         MOV     R4,DPL
   \   00007D   AD83         MOV     R5,DPH
   \   00007F   7A21         MOV     R2,#0x21
   \   000081                REQUIRE ?Subroutine49
   \   000081                ; // Fall through to label ?Subroutine49
    939          
    940            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    941          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??ZDP_BindUnbindReq?relay
   \   000005   7408         MOV     A,#0x8
   \   000007   12....       LCALL   ?DEALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   00000D                REQUIRE ??Subroutine61_0
   \   00000D                ; // Fall through to label ??Subroutine61_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   8E82         MOV     DPL,R6
   \   000004   8F83         MOV     DPH,R7
   \   000006   A3           INC     DPTR
   \   000007   0E           INC     R6
   \   000008   AF83         MOV     R7,DPH
   \   00000A   7403         MOV     A,#0x3
   \   00000C   6A           XRL     A,R2
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000003   7413         MOV     A,#0x13
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   000003   F8           MOV     R0,A
   \   000004   7401         MOV     A,#0x1
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   7402         MOV     A,#0x2
   \   000002   F0           MOVX    @DPTR,A
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   00000A   F8           MOV     R0,A
   \   00000B   740A         MOV     A,#0xa
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   EA           MOV     A,R2
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   EA           MOV     A,R2
   \   000001   FE           MOV     R6,A
   \   000002   EB           MOV     A,R3
   \   000003   FF           MOV     R7,A
   \   000004   8E82         MOV     DPL,R6
   \   000006   8F83         MOV     DPH,R7
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 0,A
   \   00000D   EE           MOV     A,R6
   \   00000E   2403         ADD     A,#0x3
   \   000010   0E           INC     R6
   \   000011   0E           INC     R6
   \   000012   0E           INC     R6
   \   000013   EF           MOV     A,R7
   \   000014   3400         ADDC    A,#0x0
   \   000016   FF           MOV     R7,A
   \   000017   7412         MOV     A,#0x12
   \   000019   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   EE           MOV     A,R6
   \   000006   2402         ADD     A,#0x2
   \   000008   F5..         MOV     ?V0 + 2,A
   \   00000A   EF           MOV     A,R7
   \   00000B   3400         ADDC    A,#0x0
   \   00000D   F5..         MOV     ?V0 + 3,A
   \   00000F   E5..         MOV     A,?V0 + 2
   \   000011   2408         ADD     A,#0x8
   \   000013   FE           MOV     R6,A
   \   000014   E5..         MOV     A,?V0 + 3
   \   000016   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000019   F5..         MOV     ?V0 + 1,A
   \   00001B   A3           INC     DPTR
   \   00001C   AE82         MOV     R6,DPL
   \   00001E   AF83         MOV     R7,DPH
   \   000020   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000023   F5..         MOV     ?V0 + 6,A
   \   000025   E9           MOV     A,R1
   \   000026   F5..         MOV     ?V0 + 7,A
   \   000028   EE           MOV     A,R6
   \   000029   2402         ADD     A,#0x2
   \   00002B   0E           INC     R6
   \   00002C   0E           INC     R6
   \   00002D   EF           MOV     A,R7
   \   00002E   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000031   FA           MOV     R2,A
   \   000032   7409         MOV     A,#0x9
   \   000034   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FF           MOV     R7,A
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    942          
    943          /***************************************************************************************************
    944           * @fn      MT_ZdoUnbindRequest
    945           *
    946           * @brief   Handle a Unbind request.
    947           *
    948           * @param   pBuf  - MT message data
    949           *
    950           * @return  void
    951           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    952          void MT_ZdoUnbindRequest(uint8 *pBuf)
   \                     MT_ZdoUnbindRequest:
    953          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine10 & 0xFFFF
    954            uint8 cmdId;
    955            uint8 retValue;
    956            zAddrType_t destAddr, devAddr;
    957            uint8 *pSrcAddr, *ptr;
    958            uint8 srcEPInt, dstEPInt;
    959            uint16 clusterID;
    960          
    961            /* parse header */
    962            cmdId = pBuf[MT_RPC_POS_CMD1];
    963            pBuf += MT_RPC_FRAME_HDR_SZ;
    964          
    965            /* dev address */
    966            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_18:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    967            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_24:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine4 & 0xFFFF
    968            pBuf += 2;
    969          
    970            /* SrcAddress */
    971            pSrcAddr = pBuf;
    972            pBuf += Z_EXTADDR_LEN;
    973          
    974            /* SrcEPInt */
    975            srcEPInt = *pBuf++;
    976          
    977            /* ClusterID */
    978            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
    979            pBuf += 2;
    980          
    981            /* Destination Address mode */
    982            devAddr.addrMode = *pBuf++;
   \                     ??CrossCallReturnLabel_12:
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   12....       LCALL   ?Subroutine23 & 0xFFFF
    983          
    984            /* Destination Address */
    985            if ( devAddr.addrMode == Addr64Bit )
   \                     ??CrossCallReturnLabel_36:
   \   00001F   7012         JNZ     ??MT_ZdoUnbindRequest_0
    986            {
    987              ptr = pBuf;
    988              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000021                ; Setup parameters for call to function sAddrExtCpy
   \   000021   EE           MOV     A,R6
   \   000022   FC           MOV     R4,A
   \   000023   EF           MOV     A,R7
   \   000024   FD           MOV     R5,A
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??sAddrExtCpy?relay
   \   000031   800B         SJMP    ??MT_ZdoUnbindRequest_1
    989            }
    990            else
    991            {
    992              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoUnbindRequest_0:
   \   000033   12....       LCALL   ?Subroutine14 & 0xFFFF
    993            }
   \                     ??CrossCallReturnLabel_26:
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    994            /* The short address occupies LSB two bytes */
    995            pBuf += Z_EXTADDR_LEN;
    996          
    997            /* dstEPInt */
    998            dstEPInt = *pBuf;
    999          
   1000            retValue = (uint8)ZDP_UnbindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoUnbindRequest_1:
   \   00003E                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   00003E   75..00       MOV     ?V0 + 4,#0x0
   \   000041   78..         MOV     R0,#?V0 + 4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   F5..         MOV     ?V0 + 4,A
   \   000055   78..         MOV     R0,#?V0 + 4
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   7403         MOV     A,#0x3
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   8582..       MOV     ?V0 + 4,DPL
   \   000062   8583..       MOV     ?V0 + 5,DPH
   \   000065   78..         MOV     R0,#?V0 + 4
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006A   78..         MOV     R0,#?V0 + 6
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   78..         MOV     R0,#?V0 + 2
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   A9..         MOV     R1,?V0 + 1
   \   000076   7412         MOV     A,#0x12
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   AC82         MOV     R4,DPL
   \   00007D   AD83         MOV     R5,DPH
   \   00007F   7A22         MOV     R2,#0x22
   \   000081   02....       LJMP    ?Subroutine49 & 0xFFFF
   1001          
   1002            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1003          }
   1004          
   1005          /***************************************************************************************************
   1006           * @fn      MT_ZdoSetLinkKey
   1007           *
   1008           * @brief   Set an application or trust center link key.
   1009           *
   1010           * @param   pBuf  - MT message data
   1011           *
   1012           * @return  void
   1013           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1014          void MT_ZdoSetLinkKey(uint8 *pBuf)
   \                     MT_ZdoSetLinkKey:
   1015          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1016            uint8 cmdId;
   1017            uint8 retValue;
   1018            uint8 *pExtAddr;
   1019            uint8 *pKey;
   1020            uint16 shortAddr;
   1021            
   1022            /* parse header */
   1023            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine5 & 0xFFFF
   1024            pBuf += MT_RPC_FRAME_HDR_SZ;
   1025          
   1026            /* ShortAddr */
   1027            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1028            pBuf += 2;
   1029            
   1030            /* Extended Addr */
   1031            pExtAddr = pBuf;
   1032            pBuf += Z_EXTADDR_LEN;
   1033            
   1034            /* Key data */
   1035            pKey = pBuf;
   1036          
   1037            retValue = (uint8)ZDSecMgrAddLinkKey( shortAddr, pExtAddr, pKey);
   \                     ??CrossCallReturnLabel_14:
   \   00000D                ; Setup parameters for call to function ZDSecMgrAddLinkKey
   \   00000D   EA           MOV     A,R2
   \   00000E   2408         ADD     A,#0x8
   \   000010   F5..         MOV     ?V0 + 2,A
   \   000012   EB           MOV     A,R3
   \   000013   3400         ADDC    A,#0x0
   \   000015   F5..         MOV     ?V0 + 3,A
   \   000017   78..         MOV     R0,#?V0 + 2
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001C   EA           MOV     A,R2
   \   00001D   FC           MOV     R4,A
   \   00001E   EB           MOV     A,R3
   \   00001F   FD           MOV     R5,A
   \   000020   EE           MOV     A,R6
   \   000021   FA           MOV     R2,A
   \   000022   EF           MOV     A,R7
   \   000023   FB           MOV     R3,A
   \   000024   12....       LCALL   ??ZDSecMgrAddLinkKey?relay
   \   000027   7402         MOV     A,#0x2
   \   000029   12....       LCALL   ?DEALLOC_XSTACK8
   \   00002C   12....       LCALL   ?Subroutine20 & 0xFFFF
   1038          
   1039            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1040          }
   \                     ??CrossCallReturnLabel_69:
   \   00002F   02....       LJMP    ?Subroutine48 & 0xFFFF
   1041          
   1042          /***************************************************************************************************
   1043           * @fn      MT_ZdoRemoveLinkKey
   1044           *
   1045           * @brief   Remove an application or trust center link key.
   1046           *
   1047           * @param   pBuf  - MT message data
   1048           *
   1049           * @return  void
   1050           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1051          void MT_ZdoRemoveLinkKey(uint8 *pBuf)
   \                     MT_ZdoRemoveLinkKey:
   1052          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1053            uint8 cmdId;
   1054            uint8 retValue;
   1055            uint8 *pExtAddr;
   1056              
   1057            /* parse header */
   1058            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine11 & 0xFFFF
   1059            pBuf += MT_RPC_FRAME_HDR_SZ;
   1060            
   1061            /* ShortAddr */
   1062            pExtAddr = pBuf;
   1063          
   1064            retValue = ZDSecMgrDeviceRemoveByExtAddr( pExtAddr );
   \                     ??CrossCallReturnLabel_20:
   \   00000D   12....       LCALL   ??ZDSecMgrDeviceRemoveByExtAddr?relay
   \   000010   02....       LJMP    ?Subroutine51 & 0xFFFF
   1065          
   1066            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1067          }
   1068          
   1069          /***************************************************************************************************
   1070           * @fn      MT_ZdoGetLinkKey
   1071           *
   1072           * @brief   Get the application or trust center link key.
   1073           *
   1074           * @param   pBuf  - MT message data
   1075           *
   1076           * @return  void
   1077           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1078          void MT_ZdoGetLinkKey(uint8 *pBuf)
   \                     MT_ZdoGetLinkKey:
   1079          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1080            uint8 cmdId;
   1081            uint8 retValue;
   1082            uint8 *pExtAddr;
   1083            uint8 *retBuf;
   1084            uint8 len;
   1085            APSME_LinkKeyData_t *pLinkKey;
   1086              
   1087            /* parse header */
   1088            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 2,A
   1089            pBuf += MT_RPC_FRAME_HDR_SZ;
   1090            
   1091            /* Extended Address */
   1092            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   F5..         MOV     ?V0 + 0,A
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   F5..         MOV     ?V0 + 1,A
   1093          
   1094            /* Fetch the key data */
   1095            retValue = APSME_LinkKeyDataGet( pExtAddr, &pLinkKey );
   \   00001D                ; Setup parameters for call to function APSME_LinkKeyDataGet
   \   00001D   85..82       MOV     DPL,?XSP + 0
   \   000020   85..83       MOV     DPH,?XSP + 1
   \   000023   AC82         MOV     R4,DPL
   \   000025   AD83         MOV     R5,DPH
   \   000027   0A           INC     R2
   \   000028   0A           INC     R2
   \   000029   0A           INC     R2
   \   00002A   FB           MOV     R3,A
   \   00002B   12....       LCALL   ??APSME_LinkKeyDataGet?relay
   \   00002E   E9           MOV     A,R1
   \   00002F   F5..         MOV     ?V0 + 3,A
   1096            
   1097            /* Construct the response message */
   1098            len = 1 + Z_EXTADDR_LEN + SEC_KEY_LEN; // status + extAddr + key
   1099            if ( ( retBuf = osal_mem_alloc( len ) ) == NULL )
   \   000031                ; Setup parameters for call to function osal_mem_alloc
   \   000031   7A19         MOV     R2,#0x19
   \   000033   7B00         MOV     R3,#0x0
   \   000035   12....       LCALL   ??osal_mem_alloc?relay
   \   000038   8A..         MOV     ?V0 + 4,R2
   \   00003A   8B..         MOV     ?V0 + 5,R3
   \   00003C   AE..         MOV     R6,?V0 + 4
   \   00003E   AF..         MOV     R7,?V0 + 5
   \   000040   8E82         MOV     DPL,R6
   \   000042   8F83         MOV     DPH,R7
   \   000044   A3           INC     DPTR
   \   000045   AA82         MOV     R2,DPL
   \   000047   AB83         MOV     R3,DPH
   \   000049   EE           MOV     A,R6
   \   00004A   7001         JNZ     ??MT_ZdoGetLinkKey_0
   \   00004C   EF           MOV     A,R7
   \                     ??MT_ZdoGetLinkKey_0:
   \   00004D   7025         JNZ     ??MT_ZdoGetLinkKey_1
   1100            {
   1101              retValue = ZMemError;
   \   00004F   75..10       MOV     ?V0 + 3,#0x10
   1102            }
   1103            else
   1104            {  
   1105              if( retValue == ZSuccess )
   1106              {
   1107                /* Extended Address */
   1108                osal_memcpy( &(retBuf[1]), pExtAddr, Z_EXTADDR_LEN );
   1109                
   1110                /* Key data */
   1111                osal_memcpy( &(retBuf[1 + Z_EXTADDR_LEN]), pLinkKey->key, SEC_KEY_LEN );      
   1112              }
   1113            }
   1114              
   1115            if( retValue != ZSuccess )
   1116            {
   1117              /* Failed case - set the rest fields to all FF */
   1118              osal_memset( &(retBuf[1]), 0xFF, Z_EXTADDR_LEN + SEC_KEY_LEN );   
   \                     ??MT_ZdoGetLinkKey_2:
   \   000052                ; Setup parameters for call to function osal_memset
   \   000052   7C18         MOV     R4,#0x18
   \   000054   7D00         MOV     R5,#0x0
   \   000056   79FF         MOV     R1,#-0x1
   \   000058   12....       LCALL   ??osal_memset?relay
   1119            }    
   1120            
   1121            retBuf[0] = retValue;  /* Status */
   \                     ??MT_ZdoGetLinkKey_3:
   \   00005B   8E82         MOV     DPL,R6
   \   00005D   8F83         MOV     DPH,R7
   \   00005F   E5..         MOV     A,?V0 + 3
   \   000061   F0           MOVX    @DPTR,A
   1122            
   1123            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, len, retBuf);
   \   000062                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000062   EE           MOV     A,R6
   \   000063   FC           MOV     R4,A
   \   000064   EF           MOV     A,R7
   \   000065   FD           MOV     R5,A
   \   000066   7B19         MOV     R3,#0x19
   \   000068   AA..         MOV     R2,?V0 + 2
   \   00006A   7965         MOV     R1,#0x65
   \   00006C   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1124            
   1125            return;
   \   00006F   7402         MOV     A,#0x2
   \   000071   02....       LJMP    ?Subroutine47 & 0xFFFF
   \                     ??MT_ZdoGetLinkKey_1:
   \   000074   E5..         MOV     A,?V0 + 3
   \   000076   70DA         JNZ     ??MT_ZdoGetLinkKey_2
   \   000078                ; Setup parameters for call to function osal_memcpy
   \   000078   85....       MOV     ?V0 + 4,?V0 + 0
   \   00007B   85....       MOV     ?V0 + 5,?V0 + 1
   \   00007E   75..00       MOV     ?V0 + 6,#0x0
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000086   7C08         MOV     R4,#0x8
   \   000088   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   00008B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008E                ; Setup parameters for call to function osal_memcpy
   \   00008E   85..82       MOV     DPL,?XSP + 0
   \   000091   85..83       MOV     DPH,?XSP + 1
   \   000094   E0           MOVX    A,@DPTR
   \   000095   F8           MOV     R0,A
   \   000096   A3           INC     DPTR
   \   000097   E0           MOVX    A,@DPTR
   \   000098   F583         MOV     DPH,A
   \   00009A   8882         MOV     DPL,R0
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   F5..         MOV     ?V0 + 0,A
   \   00009F   A3           INC     DPTR
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   85....       MOV     ?V0 + 4,?V0 + 0
   \   0000A4   F5..         MOV     ?V0 + 5,A
   \   0000A6   78..         MOV     R0,#?V0 + 4
   \   0000A8   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000AB   7C10         MOV     R4,#0x10
   \   0000AD   7D00         MOV     R5,#0x0
   \   0000AF   EE           MOV     A,R6
   \   0000B0   2409         ADD     A,#0x9
   \   0000B2   FA           MOV     R2,A
   \   0000B3   EF           MOV     A,R7
   \   0000B4   3400         ADDC    A,#0x0
   \   0000B6   FB           MOV     R3,A
   \   0000B7   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BD   809C         SJMP    ??MT_ZdoGetLinkKey_3
   1126          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   7D00         MOV     R5,#0x0
   \   000002                REQUIRE ??Subroutine63_0
   \   000002                ; // Fall through to label ??Subroutine63_0
   1127          
   1128          #if defined (MT_ZDO_MGMT)
   1129          /***************************************************************************************************
   1130           * @fn      MT_ZdoMgmtNwkDiscRequest
   1131           *
   1132           * @brief   Handle a Mgmt Nwk Discovery request.
   1133           *
   1134           * @param   pBuf  - MT message data
   1135           *
   1136           * @return  void
   1137           ***************************************************************************************************/
   1138          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf)
   1139          {
   1140            uint8 cmdId;
   1141            uint8 retValue;
   1142            zAddrType_t destAddr;
   1143            uint32 scanChannels;
   1144            uint8 scanDuration, startIndex;
   1145          
   1146            /* parse header */
   1147            cmdId = pBuf[MT_RPC_POS_CMD1];
   1148            pBuf += MT_RPC_FRAME_HDR_SZ;
   1149          
   1150            /* Dev address */
   1151            destAddr.addrMode = Addr16Bit;
   1152            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1153            pBuf += 2;
   1154          
   1155            /* Scan Channels */
   1156            scanChannels = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3] );
   1157            pBuf += 4;
   1158          
   1159            /* Scan Duration */
   1160            scanDuration = *pBuf++;
   1161          
   1162            /* Start Index */
   1163            startIndex = *pBuf;
   1164          
   1165            retValue = (uint8)ZDP_MgmtNwkDiscReq( &destAddr, scanChannels, scanDuration, startIndex, 0);
   1166          
   1167            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1168          }
   1169          
   1170          /***************************************************************************************************
   1171           * @fn      MT_ZdoMgmtLqiRequest
   1172           *
   1173           * @brief   Handle a Mgmt Lqi request.
   1174           *
   1175           * @param   pBuf  - MT message data
   1176           *
   1177           * @return  void
   1178           ***************************************************************************************************/
   1179          void MT_ZdoMgmtLqiRequest(uint8 *pBuf)
   1180          {
   1181            uint8 cmdId;
   1182            uint8 retValue;
   1183            zAddrType_t destAddr;
   1184            uint8 startIndex;
   1185          
   1186            /* parse header */
   1187            cmdId = pBuf[MT_RPC_POS_CMD1];
   1188            pBuf += MT_RPC_FRAME_HDR_SZ;
   1189          
   1190            /* Dev address */
   1191            destAddr.addrMode = Addr16Bit;
   1192            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1193            pBuf += 2;
   1194          
   1195            /* Start Index */
   1196            startIndex = *pBuf;
   1197          
   1198            retValue = (uint8)ZDP_MgmtLqiReq( &destAddr, startIndex, 0);
   1199          
   1200            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1201          }
   1202          
   1203          /***************************************************************************************************
   1204           * @fn      MT_ZdoMgmtRtgRequest
   1205           *
   1206           * @brief   Handle a Mgmt Rtg request.
   1207           *
   1208           * @param   pBuf  - MT message data
   1209           *
   1210           * @return  void
   1211           ***************************************************************************************************/
   1212          void MT_ZdoMgmtRtgRequest(uint8 *pBuf)
   1213          {
   1214            uint8 cmdId;
   1215            uint8 retValue;
   1216            zAddrType_t destAddr;
   1217            uint8 startIndex;
   1218          
   1219            /* parse header */
   1220            cmdId = pBuf[MT_RPC_POS_CMD1];
   1221            pBuf += MT_RPC_FRAME_HDR_SZ;
   1222          
   1223            /* Dev Address */
   1224            destAddr.addrMode = Addr16Bit;
   1225            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   1226            pBuf += 2;
   1227          
   1228            /* Start Index */
   1229            startIndex = *pBuf;
   1230          
   1231            retValue = (byte)ZDP_MgmtRtgReq( &destAddr, startIndex, 0);
   1232          
   1233            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1234          }
   1235          
   1236          /***************************************************************************************************
   1237           * @fn      MT_ZdoMgmtBindRequest
   1238           *
   1239           * @brief   Handle a Mgmt Bind request.
   1240           *
   1241           * @param   pBuf  - MT message data
   1242           *
   1243           * @return  void
   1244           ***************************************************************************************************/
   1245          void MT_ZdoMgmtBindRequest(uint8 *pBuf)
   1246          {
   1247            uint8 cmdId;
   1248            uint8 retValue;
   1249            zAddrType_t destAddr;
   1250            uint8 startIndex;
   1251          
   1252            /* parse header */
   1253            cmdId = pBuf[MT_RPC_POS_CMD1];
   1254            pBuf += MT_RPC_FRAME_HDR_SZ;
   1255          
   1256            /* Dev Address */
   1257            destAddr.addrMode = Addr16Bit;
   1258            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1259            pBuf += 2;
   1260          
   1261            /* Start Index */
   1262            startIndex = *pBuf;
   1263          
   1264            retValue = (uint8)ZDP_MgmtBindReq( &destAddr, startIndex, 0);
   1265          
   1266            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1267          }
   1268          
   1269          /***************************************************************************************************
   1270           * @fn      MT_ZdoMgmtLeaveRequest
   1271           *
   1272           * @brief   Handle a Mgmt Leave request.
   1273           *
   1274           * @param   pBuf  - MT message data
   1275           *
   1276           * @return  void
   1277           ***************************************************************************************************/
   1278          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf)
   1279          {
   1280            uint8 cmdId;
   1281            uint8 retValue;
   1282            zAddrType_t destAddr;
   1283            uint8 *pIEEEAddr;
   1284            uint8 removeChildren, rejoin;
   1285          
   1286            /* parse header */
   1287            cmdId = pBuf[MT_RPC_POS_CMD1];
   1288            pBuf += MT_RPC_FRAME_HDR_SZ;
   1289          
   1290            /* Destination Address */
   1291            destAddr.addrMode = Addr16Bit;
   1292            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1293            pBuf += 2;
   1294          
   1295            /* IEEE address */
   1296            pIEEEAddr = pBuf;
   1297            pBuf += Z_EXTADDR_LEN;
   1298          
   1299            /* Remove Children */
   1300            removeChildren = *pBuf++;
   1301          
   1302            /* Rejoin */
   1303            rejoin = *pBuf;
   1304          
   1305            retValue = (byte)ZDP_MgmtLeaveReq( &destAddr, pIEEEAddr, removeChildren, rejoin, 0);
   1306          
   1307            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1308          }
   1309          
   1310          
   1311          /***************************************************************************************************
   1312           * @fn      MT_ZdoMgmtDirectJoinRequest
   1313           *
   1314           * @brief   Handle a Mgmt Direct Join request.
   1315           *
   1316           * @param   pBuf  - MT message data
   1317           *
   1318           * @return  void
   1319           ***************************************************************************************************/
   1320          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf)
   1321          {
   1322            uint8 cmdId;
   1323            uint8 retValue;
   1324            zAddrType_t destAddr;
   1325            uint8 *deviceAddr;
   1326            uint8 capInfo;
   1327          
   1328            /* parse header */
   1329            cmdId = pBuf[MT_RPC_POS_CMD1];
   1330            pBuf += MT_RPC_FRAME_HDR_SZ;
   1331          
   1332            /* Destination Address */
   1333            destAddr.addrMode = Addr16Bit;
   1334            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1335            pBuf += 2;
   1336          
   1337            /* Device Address */
   1338            deviceAddr = pBuf;
   1339            pBuf += Z_EXTADDR_LEN;
   1340          
   1341            /* Capability information */
   1342            capInfo = *pBuf;
   1343          
   1344            retValue = (uint8)ZDP_MgmtDirectJoinReq( &destAddr, deviceAddr, capInfo, 0);
   1345          
   1346            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1347          }
   1348          
   1349          /***************************************************************************************************
   1350           * @fn      MT_ZdoMgmtPermitJoinRequest
   1351           *
   1352           * @brief   Handle a Mgmt Permit Join request.
   1353           *
   1354           * @param   pBuf  - MT message data
   1355           *
   1356           * @return  void
   1357           ***************************************************************************************************/
   1358          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf)
   1359          {
   1360            uint8 cmdId;
   1361            uint8 retValue;
   1362            zAddrType_t destAddr;
   1363            uint8 duration, tcSignificance;
   1364          
   1365            /* parse header */
   1366            cmdId = pBuf[MT_RPC_POS_CMD1];
   1367            pBuf += MT_RPC_FRAME_HDR_SZ;
   1368          
   1369            /* Destination Address */
   1370            destAddr.addrMode = Addr16Bit;
   1371            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1372            pBuf += 2;
   1373          
   1374            /* Duration */
   1375            duration = *pBuf++;
   1376          
   1377            /* Trust center significance */
   1378            tcSignificance = *pBuf;
   1379          
   1380            retValue = (byte)ZDP_MgmtPermitJoinReq( &destAddr, duration, tcSignificance, 0);
   1381          
   1382            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1383          }
   1384          
   1385          /***************************************************************************************************
   1386           * @fn      MT_ZdoMgmtNwkUpdateRequest
   1387           *
   1388           * @brief   Handle a Mgmt Nwk Update request.
   1389           *
   1390           * @param   pBuf  - MT message data
   1391           *
   1392           * @return  void
   1393           ***************************************************************************************************/
   1394          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf)
   1395          {
   1396            uint8 cmdId;
   1397            uint8 retValue;
   1398            zAddrType_t destAddr;
   1399            uint32 channelMask;
   1400            uint8 scanDuration, scanCount;
   1401            uint16 nwkManagerAddr;
   1402          
   1403              /* parse header */
   1404            cmdId = pBuf[MT_RPC_POS_CMD1];
   1405            pBuf += MT_RPC_FRAME_HDR_SZ;
   1406          
   1407            /* Destination address */
   1408            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1409            pBuf += 2;
   1410          
   1411            /* Destination address mode */
   1412            destAddr.addrMode = *pBuf++;
   1413          
   1414            channelMask = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3]);
   1415            pBuf += 4;
   1416          
   1417            /* Scan duration */
   1418            scanDuration = *pBuf++;
   1419          
   1420            /* Scan count */
   1421            scanCount = *pBuf++;
   1422          
   1423            /* NWK manager address */
   1424            nwkManagerAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1425          
   1426            /* Send the Management Network Update request */
   1427            retValue = (uint8)ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1428                                                    scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1429          
   1430            /*
   1431              Since we don't recevied our own broadcast messages, we should
   1432              send a unicast copy of the message to ourself.
   1433            */
   1434            if ( destAddr.addrMode == AddrBroadcast )
   1435            {
   1436              destAddr.addrMode = Addr16Bit;
   1437              destAddr.addr.shortAddr = _NIB.nwkDevAddress;
   1438              retValue = (uint8) ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1439                                                       scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1440            }
   1441          
   1442            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1443          }
   1444          #endif /* MT_ZDO_MGMT */
   1445          
   1446          /***************************************************************************************************
   1447           * @fn      MT_ZdoStartupFromApp
   1448           *
   1449           * @brief   Handle a Startup from App request.
   1450           *
   1451           * @param   pBuf  - MT message data
   1452           *
   1453           * @return  void
   1454           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1455          void MT_ZdoStartupFromApp(uint8 *pBuf)
   \                     MT_ZdoStartupFromApp:
   1456          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1457            uint8 cmd0, cmd1, retValue;
   1458          
   1459            /* parse header */
   1460            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine30 & 0xFFFF
   1461            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1462            pBuf += MT_RPC_FRAME_HDR_SZ;
   1463          
   1464            retValue = ZDOInitDevice(100);
   \                     ??CrossCallReturnLabel_44:
   \   00000D                ; Setup parameters for call to function ZDOInitDevice
   \   00000D   7A64         MOV     R2,#0x64
   \   00000F   7B00         MOV     R3,#0x0
   \   000011   12....       LCALL   ??ZDOInitDevice?relay
   \   000014   12....       LCALL   ?Subroutine24 & 0xFFFF
   1465          
   1466            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_37:
   \   000017   700D         JNZ     ??MT_ZdoStartupFromApp_0
   1467            {
   1468              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1,1, &retValue);
   \   000019                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000019   AC82         MOV     R4,DPL
   \   00001B   AD83         MOV     R5,DPH
   \   00001D   7B01         MOV     R3,#0x1
   \   00001F   EF           MOV     A,R7
   \   000020   FA           MOV     R2,A
   \   000021   7965         MOV     R1,#0x65
   \   000023   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1469            }
   1470          }
   \                     ??MT_ZdoStartupFromApp_0:
   \   000026                REQUIRE ?Subroutine52
   \   000026                ; // Fall through to label ?Subroutine52

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   7401         MOV     A,#0x1
   \   000002   02....       LJMP    ??Subroutine55_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   E9           MOV     A,R1
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008   74E0         MOV     A,#-0x20
   \   00000A   5E           ANL     A,R6
   \   00000B   6420         XRL     A,#0x20
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   FE           MOV     R6,A
   \   000007   8A82         MOV     DPL,R2
   \   000009   8B83         MOV     DPH,R3
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   FF           MOV     R7,A
   \   00000F   22           RET
   1471          
   1472          /*************************************************************************************************
   1473           * @fn      MT_ZdoRegisterForZDOMsg(pBuf);
   1474           *
   1475           * @brief   MT proxy for ZDO_RegisterForZDOMsg.
   1476           *
   1477           * @param   pBuf  - MT message data
   1478           *
   1479           * @return  void
   1480           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1481          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf)
   \                     MT_ZdoRegisterForZDOMsg:
   1482          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1483            uint8 cmd0, cmd1, tmp;
   1484            uint16 cId;
   1485          
   1486            /* parse header */
   1487            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine3 & 0xFFFF
   1488            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1489            pBuf += MT_RPC_FRAME_HDR_SZ;
   1490          
   1491            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1492            tmp = ZDO_RegisterForZDOMsg(MT_TaskID, cId);
   \                     ??CrossCallReturnLabel_9:
   \   00000D   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
   \   000010   12....       LCALL   ?Subroutine24 & 0xFFFF
   1493          
   1494            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_38:
   \   000013   700D         JNZ     ??MT_ZdoRegisterForZDOMsg_0
   1495            {
   1496              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   000015                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7B01         MOV     R3,#0x1
   \   00001B   EF           MOV     A,R7
   \   00001C   FA           MOV     R2,A
   \   00001D   7965         MOV     R1,#0x65
   \   00001F   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1497            }
   1498          }
   \                     ??MT_ZdoRegisterForZDOMsg_0:
   \   000022   80..         SJMP    ?Subroutine52

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000003   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000006   FA           MOV     R2,A
   \   000007   E9           MOV     A,R1
   \   000008   FB           MOV     R3,A
   \   000009   90....       MOV     DPTR,#MT_TaskID
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F9           MOV     R1,A
   \   00000E   22           RET
   1499          
   1500          /*************************************************************************************************
   1501           * @fn      MT_ZdoRemoveRegisteredCB(pBuf);
   1502           *
   1503           * @brief   MT proxy for ZDO_RemoveRegisteredCB.
   1504           *
   1505           * @param   pBuf  - MT message data
   1506           *
   1507           * @return  void
   1508           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1509          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf)
   \                     MT_ZdoRemoveRegisteredCB:
   1510          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1511            uint8 cmd0, cmd1, tmp;
   1512            uint16 cId;
   1513          
   1514            /* parse header */
   1515            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine3 & 0xFFFF
   1516            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1517            pBuf += MT_RPC_FRAME_HDR_SZ;
   1518          
   1519            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1520            tmp = ZDO_RemoveRegisteredCB(MT_TaskID, cId);
   \                     ??CrossCallReturnLabel_10:
   \   00000D   12....       LCALL   ??ZDO_RemoveRegisteredCB?relay
   \   000010   12....       LCALL   ?Subroutine24 & 0xFFFF
   1521          
   1522            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_39:
   \   000013   700D         JNZ     ??MT_ZdoRemoveRegisteredCB_0
   1523            {
   1524              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   000015                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7B01         MOV     R3,#0x1
   \   00001B   EF           MOV     A,R7
   \   00001C   FA           MOV     R2,A
   \   00001D   7965         MOV     R1,#0x65
   \   00001F   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1525            }
   1526          }
   \                     ??MT_ZdoRemoveRegisteredCB_0:
   \   000022   80..         SJMP    ?Subroutine52
   1527          
   1528          #endif /* MT_ZDO_FUNC */
   1529          
   1530          
   1531          /***************************************************************************************************
   1532           * Callback handling function
   1533           ***************************************************************************************************/
   1534          
   1535          #if defined (MT_ZDO_CB_FUNC)
   1536          
   1537          /***************************************************************************************************
   1538           * @fn      MT_ZdoStateChangeCB
   1539           *
   1540           * @brief   Handle state change OSAL message from ZDO.
   1541           *
   1542           * @param   pMsg  - Message data
   1543           *
   1544           * @return  void
   1545           */
   1546          void MT_ZdoStateChangeCB(osal_event_hdr_t *pMsg)
   1547          {
   1548            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1549                                                 MT_ZDO_STATE_CHANGE_IND, 1, &pMsg->status);
   1550          }
   1551          
   1552          /***************************************************************************************************
   1553           * @fn     MT_ZdoDirectCB()
   1554           *
   1555           * @brief  ZDO direct callback.  Build an MT message directly from the
   1556           *         over-the-air ZDO message.
   1557           *
   1558           * @param  pData - Incoming AF frame.
   1559           *
   1560           * @return  none
   1561           ***************************************************************************************************/
   1562          void MT_ZdoDirectCB( afIncomingMSGPacket_t *pData,  zdoIncomingMsg_t *inMsg )
   1563          {
   1564            uint8 len, *pBuf;
   1565            
   1566            // Is the message an exception or not a response?
   1567            if ( MT_ZdoHandleExceptions( pData, inMsg ) || ( (pData->clusterId & ZDO_RESPONSE_BIT) == 0 ) )
   1568            {
   1569              return;  // Handled somewhere else or not needed.
   1570            }
   1571          
   1572            /* ZDO data starts after one-byte sequence number and the msg buffer length includes
   1573             * two bytes for srcAddr.
   1574             */
   1575            len = pData->cmd.DataLength - 1 + sizeof(uint16);
   1576          
   1577            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1578            {
   1579              uint8 id = MT_ZDO_CID_TO_AREQ_ID(pData->clusterId);
   1580          
   1581              pBuf[0] = LO_UINT16(pData->srcAddr.addr.shortAddr);
   1582              pBuf[1] = HI_UINT16(pData->srcAddr.addr.shortAddr);
   1583          
   1584              /* copy ZDO data, skipping one-byte sequence number */
   1585              osal_memcpy(pBuf+2, (pData->cmd.Data + 1), pData->cmd.DataLength-1);
   1586          
   1587              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1588              osal_mem_free(pBuf);
   1589            }
   1590          }
   1591          
   1592          /***************************************************************************************************
   1593           * @fn     MT_ZdoHandleExceptions()
   1594           *
   1595           * @brief  Handles all messages that are an expection to the generic MT ZDO Response.
   1596           *
   1597           * @param  pData - Incoming AF frame.
   1598           *
   1599           * @return  TRUE if handled by this function, FALSE if not
   1600           ***************************************************************************************************/
   1601          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg )
   1602          {
   1603            uint8 ret = TRUE;
   1604            ZDO_NwkIEEEAddrResp_t *nwkRsp = NULL;
   1605            ZDO_DeviceAnnce_t devAnnce;
   1606            uint8 doDefault = FALSE;
   1607            
   1608            switch ( inMsg->clusterID )
   1609            {
   1610              case NWK_addr_rsp:
   1611              case IEEE_addr_rsp:
   1612                nwkRsp = ZDO_ParseAddrRsp( inMsg );
   1613                MT_ZdoAddrRspCB( nwkRsp, inMsg->clusterID );
   1614                if ( nwkRsp )
   1615                  osal_mem_free( nwkRsp );
   1616                break;
   1617                
   1618              case Device_annce:
   1619                ZDO_ParseDeviceAnnce( inMsg, &devAnnce );
   1620                MT_ZdoEndDevAnnceCB( &devAnnce, inMsg->srcAddr.addr.shortAddr );
   1621                break;
   1622                
   1623              case Simple_Desc_rsp:
   1624                if ( pData->cmd.DataLength > 5 )
   1625                  ret = FALSE;
   1626                else
   1627                  doDefault = TRUE;        
   1628                break;  
   1629                
   1630              default:
   1631                ret = FALSE;
   1632                break;
   1633            }
   1634            
   1635            if ( doDefault )
   1636            {
   1637              ret = FALSE;
   1638              pData->clusterId = MtZdoDef_rsp;
   1639              pData->cmd.DataLength = 2;
   1640            }
   1641          
   1642            return ( ret );
   1643          }
   1644          
   1645          /***************************************************************************************************
   1646           * @fn      MT_ZdoAddrRspCB
   1647           *
   1648           * @brief   Handle IEEE or nwk address response OSAL message from ZDO.
   1649           *
   1650           * @param   pMsg  - Message data
   1651           *
   1652           * @return  void
   1653           */
   1654          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID )
   1655          {
   1656            uint8   listLen, len, *pBuf;
   1657          
   1658            /* both ZDO_NwkAddrResp_t and ZDO_IEEEAddrResp_t must be the same */
   1659          
   1660            /* get length, sanity check length */
   1661            listLen = pMsg->numAssocDevs;
   1662            
   1663            /* calculate msg length */
   1664            len = MT_ZDO_ADDR_RSP_LEN + (listLen * sizeof(uint16));
   1665          
   1666            /* get buffer */
   1667            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1668            {
   1669              uint8 id = MT_ZDO_CID_TO_AREQ_ID(clusterID);
   1670              uint8 *pTmp = pBuf;
   1671          
   1672              *pTmp++ = pMsg->status;
   1673          
   1674              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1675              pTmp += Z_EXTADDR_LEN;
   1676          
   1677              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1678              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1679          
   1680              *pTmp++ = pMsg->startIndex;
   1681              *pTmp++ = listLen;
   1682          
   1683              MT_Word2Buf(pTmp, pMsg->devList, listLen);
   1684          
   1685              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1686              osal_mem_free(pBuf);
   1687            }
   1688          }
   1689          
   1690          /***************************************************************************************************
   1691           * @fn      MT_ZdoEndDevAnnceCB
   1692           *
   1693           * @brief   Handle end device announce OSAL message from ZDO.
   1694           *
   1695           * @param   pMsg  - Message data
   1696           *
   1697           * @return  void
   1698           */
   1699          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr )
   1700          {
   1701            uint8 *pBuf;
   1702          
   1703            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(MT_ZDO_END_DEVICE_ANNCE_IND_LEN)))
   1704            {
   1705              uint8 *pTmp = pBuf;
   1706          
   1707              *pTmp++ = LO_UINT16(srcAddr);
   1708              *pTmp++ = HI_UINT16(srcAddr);
   1709          
   1710              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1711              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1712          
   1713              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1714              pTmp += Z_EXTADDR_LEN;
   1715          
   1716              *pTmp = pMsg->capabilities;
   1717          
   1718              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), 
   1719                                                   MT_ZDO_END_DEVICE_ANNCE_IND, 
   1720                                                   MT_ZDO_END_DEVICE_ANNCE_IND_LEN, pBuf);
   1721              osal_mem_free(pBuf);
   1722            }
   1723          }
   1724          
   1725          /***************************************************************************************************
   1726           * @fn      MT_ZdoSrcRtgCB
   1727           *
   1728           * @brief   Handle Src Route from ZDO.
   1729           *
   1730           * @param   pStr  - pointer to the data structure for the src route
   1731           *
   1732           * @return  void* 
   1733           */
   1734          void* MT_ZdoSrcRtgCB( void *pStr )
   1735          {
   1736            uint8 len, *pBuf;
   1737            zdoSrcRtg_t *pSrcRtg = pStr;
   1738            
   1739            // srcAddr (2) + relayCnt (1) + relayList( relaycnt * 2 )
   1740            len = 2 + 1 + pSrcRtg->relayCnt * sizeof(uint16);
   1741          
   1742            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1743            {
   1744              uint8 idx, *pTmp = pBuf;
   1745              uint16 *pRelay;
   1746          
   1747              // Packet payload
   1748              *pTmp++ = LO_UINT16(pSrcRtg->srcAddr);
   1749              *pTmp++ = HI_UINT16(pSrcRtg->srcAddr);
   1750              *pTmp++ = pSrcRtg->relayCnt;
   1751              
   1752              // Relay List
   1753              if( ( pRelay = pSrcRtg->pRelayList ) != NULL )
   1754              {
   1755                for( idx = 0; idx < pSrcRtg->relayCnt; idx ++ )
   1756                {
   1757                  *pTmp++ = LO_UINT16(*pRelay);
   1758                  *pTmp++ = HI_UINT16(*pRelay);
   1759                  pRelay++;
   1760                }
   1761              }
   1762              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1763                                                   MT_ZDO_SRC_RTG_IND, len, pBuf);
   1764              osal_mem_free(pBuf);
   1765            }
   1766            
   1767            return NULL;
   1768          }
   1769          #endif // MT_ZDO_CB_FUNC
   1770          
   1771          /***************************************************************************************************
   1772           * @fn      MT_ZdoSendMsgCB
   1773           *
   1774           * @brief   Proxy the ZDO_SendMsgCBs one message at a time.
   1775           *
   1776           * @param   pMsg  - Message data
   1777           *
   1778           * @return  void
   1779           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1780          void MT_ZdoSendMsgCB(zdoIncomingMsg_t *pMsg)
   \                     MT_ZdoSendMsgCB:
   1781          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1782            uint8 len = pMsg->asduLen + 9;
   \   000009   EE           MOV     A,R6
   \   00000A   2410         ADD     A,#0x10
   \   00000C   F8           MOV     R0,A
   \   00000D   EF           MOV     A,R7
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F9           MOV     R1,A
   \   000011   88..         MOV     ?V0 + 2,R0
   \   000013   89..         MOV     ?V0 + 3,R1
   \   000015   8882         MOV     DPL,R0
   \   000017   F583         MOV     DPH,A
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   2409         ADD     A,#0x9
   \   00001C   F5..         MOV     ?V0 + 4,A
   1783            uint8 *pBuf = (uint8 *)osal_mem_alloc(len);
   \   00001E                ; Setup parameters for call to function osal_mem_alloc
   \   00001E   FA           MOV     R2,A
   \   00001F   7B00         MOV     R3,#0x0
   \   000021   12....       LCALL   ??osal_mem_alloc?relay
   \   000024   8A..         MOV     ?V0 + 0,R2
   \   000026   8B..         MOV     ?V0 + 1,R3
   1784          
   1785            if (pBuf != NULL)
   \   000028   EA           MOV     A,R2
   \   000029   7001         JNZ     ??MT_ZdoSendMsgCB_0
   \   00002B   EB           MOV     A,R3
   \                     ??MT_ZdoSendMsgCB_0:
   \   00002C   6079         JZ      ??MT_ZdoSendMsgCB_1
   1786            {
   1787              uint8 *pTmp = pBuf;
   1788          
   1789              // Assuming exclusive use of network short addresses.
   1790              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   00002E   EE           MOV     A,R6
   \   00002F   2402         ADD     A,#0x2
   \   000031   F8           MOV     R0,A
   \   000032   EF           MOV     A,R7
   \   000033   3400         ADDC    A,#0x0
   \   000035   F9           MOV     R1,A
   \   000036   8882         MOV     DPL,R0
   \   000038   8983         MOV     DPH,R1
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   8A82         MOV     DPL,R2
   \   00003D   8B83         MOV     DPH,R3
   \   00003F   F0           MOVX    @DPTR,A
   \   000040   A3           INC     DPTR
   \   000041   AA82         MOV     R2,DPL
   \   000043   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   1791              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   1792              *pTmp++ = pMsg->wasBroadcast;
   \                     ??CrossCallReturnLabel_112:
   \   000046   240B         ADD     A,#0xb
   \   000048   F582         MOV     DPL,A
   \   00004A   EF           MOV     A,R7
   \   00004B   3400         ADDC    A,#0x0
   \   00004D   F583         MOV     DPH,A
   \   00004F   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1793              *pTmp++ = LO_UINT16(pMsg->clusterID);
   \                     ??CrossCallReturnLabel_113:
   \   000052   240C         ADD     A,#0xc
   \   000054   12....       LCALL   ?Subroutine2 & 0xFFFF
   1794              *pTmp++ = HI_UINT16(pMsg->clusterID);
   1795              *pTmp++ = pMsg->SecurityUse;
   \                     ??CrossCallReturnLabel_110:
   \   000057   240E         ADD     A,#0xe
   \   000059   F582         MOV     DPL,A
   \   00005B   EF           MOV     A,R7
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   F583         MOV     DPH,A
   \   000060   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1796              *pTmp++ = pMsg->TransSeq;
   \                     ??CrossCallReturnLabel_114:
   \   000063   240F         ADD     A,#0xf
   \   000065   F582         MOV     DPL,A
   \   000067   EF           MOV     A,R7
   \   000068   3400         ADDC    A,#0x0
   \   00006A   F583         MOV     DPH,A
   \   00006C   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1797              // Skipping asduLen since it can be deduced from the RPC packet length.
   1798              *pTmp++ = LO_UINT16(pMsg->macDestAddr);
   \                     ??CrossCallReturnLabel_115:
   \   00006F   2411         ADD     A,#0x11
   \   000071   12....       LCALL   ?Subroutine2 & 0xFFFF
   1799              *pTmp++ = HI_UINT16(pMsg->macDestAddr);
   1800              (void)osal_memcpy(pTmp, pMsg->asdu, pMsg->asduLen);
   \                     ??CrossCallReturnLabel_111:
   \   000074   2413         ADD     A,#0x13
   \   000076   F582         MOV     DPL,A
   \   000078   EF           MOV     A,R7
   \   000079   3400         ADDC    A,#0x0
   \   00007B   F583         MOV     DPH,A
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F5..         MOV     ?V0 + 8,A
   \   000080   A3           INC     DPTR
   \   000081   E0           MOVX    A,@DPTR
   \   000082   F5..         MOV     ?V0 + 9,A
   \   000084   75..00       MOV     ?V0 + 10,#0x0
   \   000087   78..         MOV     R0,#?V0 + 8
   \   000089   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00008C   85..82       MOV     DPL,?V0 + 2
   \   00008F   85..83       MOV     DPH,?V0 + 3
   \   000092   E0           MOVX    A,@DPTR
   \   000093   FC           MOV     R4,A
   \   000094   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000097   12....       LCALL   ?DEALLOC_XSTACK8
   1801          
   1802              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1803                                                   MT_ZDO_MSG_CB_INCOMING, len, pBuf);
   \   00009A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00009A   AC..         MOV     R4,?V0 + 0
   \   00009C   AD..         MOV     R5,?V0 + 1
   \   00009E   AB..         MOV     R3,?V0 + 4
   \   0000A0   7AFF         MOV     R2,#-0x1
   \   0000A2   7945         MOV     R1,#0x45
   \   0000A4   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1804            }
   1805          }
   \                     ??MT_ZdoSendMsgCB_1:
   \   0000A7   7F0B         MOV     R7,#0xb
   \   0000A9   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   F8           MOV     R0,A
   \   000001   EF           MOV     A,R7
   \   000002   3400         ADDC    A,#0x0
   \   000004   F9           MOV     R1,A
   \   000005   8882         MOV     DPL,R0
   \   000007   8983         MOV     DPH,R1
   \   000009   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   00000C                REQUIRE ??Subroutine64_0
   \   00000C                ; // Fall through to label ??Subroutine64_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine64_0:
   \   000000   AB83         MOV     R3,DPH
   \   000002   8882         MOV     DPL,R0
   \   000004   8983         MOV     DPH,R1
   \   000006   A3           INC     DPTR
   \   000007                REQUIRE ??Subroutine65_0
   \   000007                ; // Fall through to label ??Subroutine65_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   000003   AB83         MOV     R3,DPH
   \   000005                ; Setup parameters for call to function osal_memcpy
   \   000005   EE           MOV     A,R6
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   0A           INC     R2
   \   000008   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoCommandProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNWKAddressRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNWKAddressRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoIEEEAddrRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoIEEEAddrRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNodeDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNodeDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoPowerDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoPowerDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSimpleDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSimpleDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoActiveEpRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoActiveEpRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoMatchDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoMatchDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoComplexDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoComplexDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevAnnce?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevAnnce

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescSet?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescSet

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoServiceDiscRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoServiceDiscRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUnbindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUnbindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoGetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoGetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoStartupFromApp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoStartupFromApp

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRegisterForZDOMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRegisterForZDOMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveRegisteredCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveRegisteredCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSendMsgCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSendMsgCB
   1806          
   1807          #endif   /*ZDO Command Processing in MT*/
   1808          /***************************************************************************************************
   1809          ***************************************************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     MT_ZdoActiveEpRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoBindRequest                  1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoCommandProcessing            0      0      9
       -> MT_ZdoNWKAddressRequest       0      0     18
       -> MT_ZdoIEEEAddrRequest         0      0     18
       -> MT_ZdoNodeDescRequest         0      0     18
       -> MT_ZdoPowerDescRequest        0      0     18
       -> MT_ZdoSimpleDescRequest       0      0     18
       -> MT_ZdoActiveEpRequest         0      0     18
       -> MT_ZdoMatchDescRequest        0      0     18
       -> MT_ZdoComplexDescRequest      0      0     18
       -> MT_ZdoUserDescRequest         0      0     18
       -> MT_ZdoEndDevAnnce             0      0     18
       -> MT_ZdoUserDescSet             0      0     18
       -> MT_ZdoServiceDiscRequest      0      0     18
       -> MT_ZdoEndDevBindRequest       0      0     18
       -> MT_ZdoBindRequest             0      0     18
       -> MT_ZdoUnbindRequest           0      0     18
       -> MT_ZdoSetLinkKey              0      0     18
       -> MT_ZdoRemoveLinkKey           0      0     18
       -> MT_ZdoGetLinkKey              0      0     18
       -> MT_ZdoStartupFromApp          0      0     18
       -> MT_ZdoRegisterForZDOMsg       0      0     18
       -> MT_ZdoRemoveRegisteredCB      0      0     18
     MT_ZdoComplexDescRequest           1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoEndDevAnnce                  1      0     20
       -> ZDP_DeviceAnnce               0      0     22
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoEndDevBindRequest            1      0    104
       -> ZDP_EndDeviceBindReq          0      0    190
       -> MT_BuildAndSendZToolResponse
                                        0      0    172
     MT_ZdoGetLinkKey                   1      0     29
       -> APSME_LinkKeyDataGet          0      0     34
       -> osal_mem_alloc                0      0     34
       -> osal_memset                   0      0     34
       -> MT_BuildAndSendZToolResponse
                                        0      0     34
       -> osal_memcpy                   0      0     40
       -> osal_memcpy                   0      0     40
     MT_ZdoIEEEAddrRequest              1      0     19
       -> ZDP_IEEEAddrReq               0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoInit                         0      0      0
     MT_ZdoMatchDescRequest             1      0    106
       -> ZDP_MatchDescReq              0      0    194
       -> MT_BuildAndSendZToolResponse
                                        0      0    178
     MT_ZdoNWKAddressRequest            1      0     19
       -> ZDP_NwkAddrReq                0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoNodeDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoPowerDescRequest             1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoRegisterForZDOMsg            1      0     19
       -> ZDO_RegisterForZDOMsg         0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveLinkKey                1      0     19
       -> ZDSecMgrDeviceRemoveByExtAddr
                                        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveRegisteredCB           1      0     19
       -> ZDO_RemoveRegisteredCB        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSendMsgCB                    1      0     22
       -> osal_mem_alloc                0      0     38
       -> osal_memcpy                   0      0     44
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoServiceDiscRequest           1      0     19
       -> ZDP_ServerDiscReq             0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSetLinkKey                   1      0     24
       -> ZDSecMgrAddLinkKey            0      0     30
       -> MT_BuildAndSendZToolResponse
                                        0      0     26
     MT_ZdoSimpleDescRequest            1      0     29
       -> ZDP_SimpleDescReq             0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoStartupFromApp               1      0     19
       -> ZDOInitDevice                 0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoUnbindRequest                1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoUserDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoUserDescSet                  1      0     51
       -> osal_memcpy                   0      0     84
       -> ZDP_UserDescSet               0      0     82
       -> MT_BuildAndSendZToolResponse
                                        0      0     78


   Segment part sizes:

     Function/Label                   Bytes
     --------------                   -----
     _zdoCallbackSub                     4
     MT_ZdoInit                          3
     MT_ZdoCommandProcessing           195
     ??Subroutine56_0                    5
     MT_ZdoNWKAddressRequest            41
     ?Subroutine50                       5
     ??Subroutine55_0                    3
     ?Subroutine20                       6
     ?Subroutine12                      16
     ?Subroutine46                       6
     ?Subroutine42                      15
     ?Subroutine34                       8
     MT_ZdoIEEEAddrRequest              21
     ?Subroutine40                       9
     ?Subroutine5                       19
     ?Subroutine41                       1
     ??Subroutine62_0                    2
     ?Subroutine45                       7
     ?Subroutine39                       6
     ?Subroutine28                       9
     ??Subroutine53_0                    6
     ??Subroutine54_0                    6
     MT_ZdoNodeDescRequest              37
     ?Subroutine26                      10
     ?Subroutine19                       6
     ?Subroutine15                       9
     ?Subroutine33                       4
     ??Subroutine57_0                    5
     ?Subroutine1                       12
     ??Subroutine59_0                    6
     ?Subroutine35                       5
     ?Subroutine29                      12
     ?Subroutine43                       3
     MT_ZdoPowerDescRequest             32
     ?Subroutine7                        7
     MT_ZdoSimpleDescRequest            54
     MT_ZdoActiveEpRequest              33
     MT_ZdoMatchDescRequest            221
     ?Subroutine47                       8
     ?Subroutine18                       9
     ??Subroutine58_0                    6
     ?Subroutine8                       16
     ?Subroutine44                       8
     ?Subroutine0                        8
     ?Subroutine38                      11
     ?Subroutine16                       9
     ?Subroutine6                       16
     ?Subroutine36                       8
     MT_ZdoComplexDescRequest           33
     MT_ZdoUserDescRequest              33
     MT_ZdoEndDevAnnce                  82
     ?Subroutine51                       6
     ?Subroutine21                       6
     MT_ZdoUserDescSet                 160
     ?Subroutine48                       8
     ?Subroutine17                       5
     ??Subroutine60_0                   10
     ??Subroutine63_0                    6
     MT_ZdoServiceDiscRequest           27
     ?Subroutine11                       4
     MT_ZdoEndDevBindRequest           249
     ?Subroutine25                      10
     ?Subroutine9                       19
     ??Subroutine61_0                    8
     MT_ZdoBindRequest                 129
     ?Subroutine49                      13
     ?Subroutine23                      14
     ?Subroutine22                       6
     ?Subroutine14                       7
     ?Subroutine13                      14
     ?Subroutine31                       7
     ?Subroutine10                      26
     ?Subroutine4                       53
     ?Subroutine37                       9
     MT_ZdoUnbindRequest               132
     MT_ZdoSetLinkKey                   50
     MT_ZdoRemoveLinkKey                19
     MT_ZdoGetLinkKey                  191
     ?Subroutine27                       2
     MT_ZdoStartupFromApp               38
     ?Subroutine52                       5
     ?Subroutine24                      14
     ?Subroutine30                      16
     MT_ZdoRegisterForZDOMsg            36
     ?Subroutine3                       15
     MT_ZdoRemoveRegisteredCB           36
     MT_ZdoSendMsgCB                   172
     ?Subroutine2                       12
     ??Subroutine64_0                    7
     ??Subroutine65_0                    7
     ?Subroutine32                       9
     ??MT_ZdoInit?relay                  6
     ??MT_ZdoCommandProcessing?relay     6
     ??MT_ZdoNWKAddressRequest?relay     6
     ??MT_ZdoIEEEAddrRequest?relay       6
     ??MT_ZdoNodeDescRequest?relay       6
     ??MT_ZdoPowerDescRequest?relay      6
     ??MT_ZdoSimpleDescRequest?relay     6
     ??MT_ZdoActiveEpRequest?relay       6
     ??MT_ZdoMatchDescRequest?relay      6
     ??MT_ZdoComplexDescRequest?relay    6
     ??MT_ZdoUserDescRequest?relay       6
     ??MT_ZdoEndDevAnnce?relay           6
     ??MT_ZdoUserDescSet?relay           6
     ??MT_ZdoServiceDiscRequest?relay    6
     ??MT_ZdoEndDevBindRequest?relay     6
     ??MT_ZdoBindRequest?relay           6
     ??MT_ZdoUnbindRequest?relay         6
     ??MT_ZdoSetLinkKey?relay            6
     ??MT_ZdoRemoveLinkKey?relay         6
     ??MT_ZdoGetLinkKey?relay            6
     ??MT_ZdoStartupFromApp?relay        6
     ??MT_ZdoRegisterForZDOMsg?relay     6
     ??MT_ZdoRemoveRegisteredCB?relay    6
     ??MT_ZdoSendMsgCB?relay             6

 
 2 649 bytes in segment BANKED_CODE
   144 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_Z
 
 2 793 bytes of CODE  memory
     4 bytes of XDATA memory

Errors: none
Warnings: none
